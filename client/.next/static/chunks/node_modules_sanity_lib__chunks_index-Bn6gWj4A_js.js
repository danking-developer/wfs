"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_sanity_lib__chunks_index-Bn6gWj4A_js"],{

/***/ "./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":
/*!********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pairwise: function() { return /* binding */ pairwise; }\n/* harmony export */ });\n/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lift */ \"./node_modules/rxjs/dist/esm5/internal/util/lift.js\");\n/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorSubscriber */ \"./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\");\n\n\nfunction pairwise() {\n    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.operate)(function (source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.createOperatorSubscriber)(subscriber, function (value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([p, value]);\n            hasPrev = true;\n        }));\n    });\n}\n//# sourceMappingURL=pairwise.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL3BhaXJ3aXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1QztBQUN5QjtBQUN6RDtBQUNQLFdBQVcsbURBQU87QUFDbEI7QUFDQTtBQUNBLHlCQUF5Qiw2RUFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9wYWlyd2lzZS5qcz8zNGNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHBhaXJ3aXNlKCkge1xuICAgIHJldHVybiBvcGVyYXRlKGZ1bmN0aW9uIChzb3VyY2UsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHByZXY7XG4gICAgICAgIHZhciBoYXNQcmV2ID0gZmFsc2U7XG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyKHN1YnNjcmliZXIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHAgPSBwcmV2O1xuICAgICAgICAgICAgcHJldiA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzUHJldiAmJiBzdWJzY3JpYmVyLm5leHQoW3AsIHZhbHVlXSk7XG4gICAgICAgICAgICBoYXNQcmV2ID0gdHJ1ZTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFpcndpc2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\n"));

/***/ }),

/***/ "./node_modules/sanity/lib/_chunks/index-Bn6gWj4A.js":
/*!***********************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks/index-Bn6gWj4A.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ StructureToolBoundary; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @sanity/ui */ \"./node_modules/@sanity/ui/dist/index.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sanity */ \"./node_modules/sanity/lib/_chunks/TransformPatches-Bg_j4HpB.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! sanity */ \"./node_modules/sanity/lib/index.esm.js\");\n/* harmony import */ var _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./StructureToolProvider-CK141bsB.js */ \"./node_modules/sanity/lib/_chunks/StructureToolProvider-CK141bsB.js\");\n/* harmony import */ var sanity_router__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sanity/router */ \"./node_modules/sanity/lib/router.esm.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/omit.js */ \"./node_modules/lodash/omit.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/util/isObservable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/observable/never.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! nanoid */ \"./node_modules/nanoid/index.browser.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/refCount.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @sanity/generate-help-url */ \"./node_modules/@sanity/generate-help-url/dist/generate-help-url.esm.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEqual.js */ \"./node_modules/lodash/isEqual.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _sanity_uuid__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @sanity/uuid */ \"./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @sanity/icons */ \"./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var _getJsonStream_RYwhuhmq_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./getJsonStream-RYwhuhmq.js */ \"./node_modules/sanity/lib/_chunks/getJsonStream-RYwhuhmq.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/camelCase.js */ \"./node_modules/lodash/camelCase.js\");\n/* harmony import */ var lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! speakingurl */ \"./node_modules/speakingurl/index.js\");\n/* harmony import */ var speakingurl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(speakingurl__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/uniqueId.js */ \"./node_modules/lodash/uniqueId.js\");\n/* harmony import */ var lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqueId_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_is__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-is */ \"./node_modules/react-is/index.js\");\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash/uniq.js */ \"./node_modules/lodash/uniq.js\");\n/* harmony import */ var lodash_uniq_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_uniq_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash/kebabCase.js */ \"./node_modules/lodash/kebabCase.js\");\n/* harmony import */ var lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/find.js */ \"./node_modules/lodash/find.js\");\n/* harmony import */ var lodash_find_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_find_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash/startCase.js */ \"./node_modules/lodash/startCase.js\");\n/* harmony import */ var lodash_startCase_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! is-hotkey */ \"./node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @sanity/util/paths */ \"./node_modules/@sanity/util/lib/paths.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst emptyArray = [];\nfunction PaneRouterProvider(props) {\n  const {\n    children,\n    flatIndex,\n    index,\n    params,\n    payload,\n    siblingIndex\n  } = props;\n  const {\n    navigate,\n    navigateIntent,\n    resolvePathFromState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouter)();\n  const routerState = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouterState)();\n  const {\n    panes,\n    expand\n  } = (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.usePaneLayout)();\n  const routerPaneGroups = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (routerState == null ? void 0 : routerState.panes) || emptyArray, [routerState == null ? void 0 : routerState.panes]);\n  const lastPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => panes == null ? void 0 : panes[panes.length - 2], [panes]);\n  const groupIndex = index - 1;\n  const createNextRouterState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(modifier => {\n    const currentGroup = routerPaneGroups[groupIndex] || [];\n    const currentItem = currentGroup[siblingIndex];\n    const nextGroup = modifier(currentGroup, currentItem);\n    const nextPanes = [...routerPaneGroups.slice(0, groupIndex), nextGroup, ...routerPaneGroups.slice(groupIndex + 1)];\n    const nextRouterState = {\n      ...(routerState || {}),\n      panes: nextPanes\n    };\n    return nextRouterState;\n  }, [groupIndex, routerPaneGroups, routerState, siblingIndex]);\n  const modifyCurrentGroup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(modifier => {\n    const nextRouterState = createNextRouterState(modifier);\n    setTimeout(() => navigate(nextRouterState), 0);\n    return nextRouterState;\n  }, [createNextRouterState, navigate]);\n  const createPathWithParams = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextParams => {\n    const nextRouterState = createNextRouterState((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      params: nextParams\n    }, ...siblings.slice(siblingIndex + 1)]);\n    return resolvePathFromState(nextRouterState);\n  }, [createNextRouterState, resolvePathFromState, siblingIndex]);\n  const setPayload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextPayload => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      payload: nextPayload\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const setParams = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextParams => {\n    modifyCurrentGroup((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      params: nextParams\n    }, ...siblings.slice(siblingIndex + 1)]);\n  }, [modifyCurrentGroup, siblingIndex]);\n  const handleEditReference = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(_ref => {\n    let {\n      id,\n      parentRefPath,\n      type,\n      template\n    } = _ref;\n    navigate({\n      panes: [...routerPaneGroups.slice(0, groupIndex + 1), [{\n        id,\n        params: {\n          template: template.id,\n          parentRefPath: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_13__.toString)(parentRefPath),\n          type\n        },\n        payload: template.params\n      }]]\n    });\n  }, [groupIndex, navigate, routerPaneGroups]);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({\n    // Zero-based index (position) of pane, visually\n    index: flatIndex,\n    // Zero-based index of pane group (within URL structure)\n    groupIndex,\n    // Zero-based index of pane within sibling group\n    siblingIndex,\n    // Payload of the current pane\n    payload,\n    // Params of the current pane\n    params,\n    // Whether or not the pane has any siblings (within the same group)\n    hasGroupSiblings: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length > 1 : false,\n    // The length of the current group\n    groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n    // Current router state for the \"panes\" property\n    routerPanesState: routerPaneGroups,\n    // Curried StateLink that passes the correct state automatically\n    ChildLink: _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.ChildLink,\n    // Curried StateLink that pops off the last pane group\n    // Only pass if this is not the first pane\n    BackLink: flatIndex ? _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.BackLink : void 0,\n    // A specialized `ChildLink` that takes in the needed props to open a\n    // referenced document to the right\n    ReferenceChildLink: _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.ReferenceChildLink,\n    // Similar to `ReferenceChildLink` expect without the wrapping component\n    handleEditReference,\n    // Curried StateLink that passed the correct state, but merges params/payload\n    ParameterizedLink: _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.ParameterizedLink,\n    // Replaces the current pane with a new one\n    replaceCurrent: function () {\n      let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      modifyCurrentGroup(() => [{\n        id: opts.id || \"\",\n        payload: opts.payload,\n        params: opts.params || {}\n      }]);\n    },\n    // Removes the current pane from the group\n    closeCurrent: () => {\n      modifyCurrentGroup((siblings, item) => siblings.length > 1 ? siblings.filter(sibling => sibling !== item) : siblings);\n    },\n    // Removes all panes to the right including current\n    closeCurrentAndAfter: function () {\n      let expandLast = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (expandLast && lastPane) {\n        expand(lastPane.element);\n      }\n      navigate({\n        panes: [...routerPaneGroups.slice(0, groupIndex)]\n      }, {\n        replace: true\n      });\n    },\n    // Duplicate the current pane, with optional overrides for payload, parameters\n    duplicateCurrent: options => {\n      modifyCurrentGroup((siblings, item) => {\n        const duplicatedItem = {\n          ...item,\n          payload: (options == null ? void 0 : options.payload) || item.payload,\n          params: (options == null ? void 0 : options.params) || item.params\n        };\n        return [...siblings.slice(0, siblingIndex), duplicatedItem, ...siblings.slice(siblingIndex)];\n      });\n    },\n    // Set the view for the current pane\n    setView: viewId => {\n      const restParams = lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default()(params, \"view\");\n      return setParams(viewId ? {\n        ...restParams,\n        view: viewId\n      } : restParams);\n    },\n    // Set the parameters for the current pane\n    setParams,\n    // Set the payload for the current pane\n    setPayload,\n    // A function that returns a path with the given parameters\n    createPathWithParams,\n    // Proxied navigation to a given intent. Consider just exposing `router` instead?\n    navigateIntent\n  }), [flatIndex, groupIndex, siblingIndex, payload, params, routerPaneGroups, handleEditReference, setParams, setPayload, createPathWithParams, navigateIntent, modifyCurrentGroup, lastPane, navigate, expand]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.PaneRouterContext.Provider, {\n    value: ctx,\n    children\n  });\n}\nclass PaneResolutionError extends Error {\n  constructor(_ref2) {\n    let {\n      message,\n      context,\n      helpId,\n      cause\n    } = _ref2;\n    super(message);\n    this.context = context;\n    this.helpId = helpId;\n    this.cause = cause;\n  }\n}\nconst randomIdCache = /* @__PURE__ */new WeakMap();\nfunction assignId(obj) {\n  const cachedValue = randomIdCache.get(obj);\n  if (cachedValue) return cachedValue;\n  const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_16__.nanoid)();\n  randomIdCache.set(obj, id);\n  return id;\n}\nconst isPromise = thing => {\n  return !!thing && typeof (thing == null ? void 0 : thing.then) === \"function\";\n};\nconst isSerializable = thing => {\n  if (!(0,sanity__WEBPACK_IMPORTED_MODULE_17__.isRecord)(thing)) return false;\n  return typeof thing.serialize === \"function\";\n};\nconst rethrowWithPaneResolutionErrors = next => (unresolvedPane, context, flatIndex) => {\n  try {\n    return next(unresolvedPane, context, flatIndex);\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      throw e;\n    }\n    throw new PaneResolutionError({\n      message: typeof (e == null ? void 0 : e.message) === \"string\" ? e.message : \"\",\n      context,\n      cause: e\n    });\n  }\n};\nconst wrapWithPublishReplay = next => function () {\n  return next(...arguments).pipe(\n  // need to add publishReplay + refCount to ensure new subscribers always\n  // get an emission. without this, memoized observables may get stuck\n  // waiting for their first emissions resulting in a loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.publishReplay)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.refCount)());\n};\nfunction createPaneResolver(middleware) {\n  const resolvePane = rethrowWithPaneResolutionErrors(wrapWithPublishReplay(middleware((unresolvedPane, context, flatIndex) => {\n    if (!unresolvedPane) {\n      throw new PaneResolutionError({\n        message: \"Pane returned no child\",\n        context,\n        helpId: \"structure-item-returned-no-child\"\n      });\n    }\n    if (isPromise(unresolvedPane) || (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.isObservable)(unresolvedPane)) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.from)(unresolvedPane).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.switchMap)(result => resolvePane(result, context, flatIndex)));\n    }\n    if (isSerializable(unresolvedPane)) {\n      return resolvePane(unresolvedPane.serialize(context), context, flatIndex);\n    }\n    if (typeof unresolvedPane === \"function\") {\n      return resolvePane(unresolvedPane(context.id, context), context, flatIndex);\n    }\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.of)(unresolvedPane);\n  })));\n  return resolvePane;\n}\nconst bindCache = /* @__PURE__ */new WeakMap();\nfunction memoBind(obj, methodKey) {\n  const boundMethods = bindCache.get(obj) || /* @__PURE__ */new Map();\n  if (boundMethods) {\n    const bound2 = boundMethods.get(methodKey);\n    if (bound2) return bound2;\n  }\n  const method = obj[methodKey];\n  if (typeof method !== \"function\") {\n    throw new Error(\"Expected property `\".concat(methodKey, \"` to be a function but got \").concat(typeof method, \" instead.\"));\n  }\n  const bound = method.bind(obj);\n  boundMethods.set(methodKey, bound);\n  bindCache.set(obj, boundMethods);\n  return bound;\n}\nasync function resolveIntent(options) {\n  const resolvedPaneCache = /* @__PURE__ */new Map();\n  const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(context.path.join(\"__\"));\n    const cachedResolvedPane = key && resolvedPaneCache.get(key);\n    if (cachedResolvedPane) return cachedResolvedPane;\n    const result = nextFn(unresolvedPane, context, flatIndex);\n    if (key) resolvedPaneCache.set(key, result);\n    return result;\n  };\n  const resolvePane = createPaneResolver(memoize);\n  const fallbackEditorPanes = [[{\n    id: \"__edit__\".concat(options.params.id),\n    params: {\n      ...lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default()(options.params, [\"id\"]),\n      type: options.params.type\n    },\n    payload: options.payload\n  }]];\n  async function traverse(_ref3) {\n    let {\n      currentId,\n      flatIndex,\n      intent,\n      params,\n      parent,\n      path,\n      payload,\n      unresolvedPane,\n      levelIndex,\n      structureContext\n    } = _ref3;\n    var _a;\n    if (!unresolvedPane) return [];\n    const {\n      id: targetId,\n      type: schemaTypeName,\n      ...otherParams\n    } = params;\n    const context = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: void 0,\n      structureContext\n    };\n    const resolvedPane = await (0,rxjs__WEBPACK_IMPORTED_MODULE_24__.firstValueFrom)(resolvePane(unresolvedPane, context, flatIndex));\n    if (resolvedPane.type === \"document\" && resolvedPane.id === targetId) {\n      return [{\n        panes: [...path.slice(0, path.length - 1).map(i => [{\n          id: i\n        }]), [{\n          id: targetId,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (\n    // if the resolve pane's `canHandleIntent` returns true, then resolve\n    ((_a = resolvedPane.canHandleIntent) == null ? void 0 : _a.call(resolvedPane, intent, params, {\n      pane: resolvedPane,\n      index: flatIndex\n    })) ||\n    // if the pane's `canHandleIntent` did not return true, then match against\n    // this default case. we will resolve the intent if:\n    resolvedPane.type === \"documentList\" &&\n    // 1. the schema type matches (this required for the document to render)\n    resolvedPane.schemaTypeName === schemaTypeName &&\n    // 2. the filter is the default filter.\n    //\n    // NOTE: this case is to prevent false positive matches where the user\n    // has configured a more specific filter for a particular type. In that\n    // case, the user can implement their own `canHandleIntent` function\n    resolvedPane.options.filter === \"_type == $type\") {\n      return [{\n        panes: [\n        // map the current path to router panes\n        ...path.map(id => [{\n          id\n        }]),\n        // then augment with the intents IDs and params\n        [{\n          id: params.id,\n          params: otherParams,\n          payload\n        }]],\n        depthIndex: path.length,\n        levelIndex\n      }];\n    }\n    if (resolvedPane.type === \"list\" && resolvedPane.child && resolvedPane.items) {\n      return (await Promise.all(resolvedPane.items.map((item, nextLevelIndex) => {\n        if (item.type === \"divider\") return Promise.resolve([]);\n        return traverse({\n          currentId: item._id || item.id,\n          flatIndex: flatIndex + 1,\n          intent,\n          params,\n          parent: resolvedPane,\n          path: [...path, item.id],\n          payload,\n          unresolvedPane: typeof resolvedPane.child === \"function\" ? memoBind(resolvedPane, \"child\") : resolvedPane.child,\n          levelIndex: nextLevelIndex,\n          structureContext\n        });\n      }))).flat();\n    }\n    return [];\n  }\n  const matchingPanes = await traverse({\n    currentId: \"root\",\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext\n  });\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex;\n    return a.depthIndex - b.depthIndex;\n  })[0];\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes;\n  }\n  return fallbackEditorPanes;\n}\nconst fallbackEditorChild = (nodeId, context) => {\n  const id = nodeId.replace(/^__edit__/, \"\");\n  const {\n    params,\n    payload,\n    structureContext: {\n      resolveDocumentNode\n    }\n  } = context;\n  const {\n    type,\n    template\n  } = params;\n  if (!type) {\n    throw new Error(\"Document type for document with ID \".concat(id, \" was not provided in the router params.\"));\n  }\n  let defaultDocumentBuilder = resolveDocumentNode({\n    schemaType: type,\n    documentId: id\n  }).id(\"editor\");\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(template, payload);\n  }\n  return defaultDocumentBuilder.serialize();\n};\nfunction hashContext(context) {\n  var _a, _b;\n  return \"contextHash(\".concat(JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: (_a = context.serializeOptions) == null ? void 0 : _a.index,\n    serializeOptionsPath: (_b = context.serializeOptions) == null ? void 0 : _b.path\n  }), \")\");\n}\nconst hashResolvedPaneMeta = meta => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === \"resolvedMeta\" ? assignId(meta.paneNode) : null\n  };\n  return \"metaHash(\".concat(JSON.stringify(normalized), \")\");\n};\nfunction resolvePaneTree(_ref4) {\n  let {\n    unresolvedPane,\n    flattenedRouterPanes,\n    parent: parent2,\n    path,\n    resolvePane,\n    structureContext\n  } = _ref4;\n  const [current, ...rest] = flattenedRouterPanes;\n  const next = rest[0];\n  const context = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent: parent2,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext\n  };\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n    // this switch map receives a resolved pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.switchMap)(paneNode => {\n      const resolvedPaneMeta = {\n        type: \"resolvedMeta\",\n        ...current,\n        paneNode,\n        path: context.path\n      };\n      const loadingPanes = rest.map((i, restIndex) => {\n        const loadingPanePath = [...context.path, ...rest.slice(restIndex).map((_, currentIndex) => \"[\".concat(i.flatIndex + currentIndex, \"]\"))];\n        const loadingPane = {\n          type: \"loading\",\n          path: loadingPanePath,\n          paneNode: null,\n          ...i\n        };\n        return loadingPane;\n      });\n      if (!rest.length) {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.of)([resolvedPaneMeta]);\n      }\n      let nextStream;\n      if (\n      // the fallback editor case\n      next == null ? void 0 : next.routerPaneSibling.id.startsWith(\"__edit__\")) {\n        nextStream = resolvePaneTree({\n          unresolvedPane: fallbackEditorChild,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      } else if (current.groupIndex === (next == null ? void 0 : next.groupIndex)) {\n        nextStream = resolvePaneTree({\n          unresolvedPane,\n          flattenedRouterPanes: rest,\n          parent: parent2,\n          path,\n          resolvePane,\n          structureContext\n        });\n      } else {\n        nextStream = resolvePaneTree({\n          unresolvedPane: typeof paneNode.child === \"function\" ? memoBind(paneNode, \"child\") : paneNode.child,\n          flattenedRouterPanes: rest,\n          parent: paneNode,\n          path: context.path,\n          resolvePane,\n          structureContext\n        });\n      }\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_25__.concat)(\n      // we emit the loading panes first in a concat (this emits immediately)\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.of)([resolvedPaneMeta, ...loadingPanes]),\n      // then whenever the next stream is done, the results will be combined.\n      nextStream.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(nextResolvedPanes => [resolvedPaneMeta, ...nextResolvedPanes])));\n    }));\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\"Pane resolution error at index \".concat(e.context.index).concat(e.context.splitIndex > 0 ? \" for split pane index \".concat(e.context.splitIndex) : \"\", \": \").concat(e.message).concat(e.helpId ? \" - see \".concat((0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_27__.generateHelpUrl)(e.helpId)) : \"\"), e);\n      }\n      if (e.helpId === \"structure-item-returned-no-child\") {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.of)([]);\n      }\n    }\n    throw e;\n  }\n}\nfunction createResolvedPaneNodeStream(_ref5) {\n  let {\n    routerPanesStream,\n    rootPaneNode,\n    initialCacheState = {\n      cacheKeysByFlatIndex: [],\n      flattenedRouterPanes: [],\n      resolvedPaneCache: /* @__PURE__ */new Map(),\n      resolvePane: () => rxjs__WEBPACK_IMPORTED_MODULE_28__.NEVER\n    },\n    structureContext\n  } = _ref5;\n  const resolvedPanes$ = routerPanesStream.pipe(\n  // add in implicit \"root\" router pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(rawRouterPanes => [[{\n    id: \"root\"\n  }], ...rawRouterPanes]),\n  // create flattened router panes\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(routerPanes => {\n    const flattenedRouterPanes = routerPanes.flatMap((routerPaneGroup, groupIndex) => routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n      routerPaneSibling,\n      groupIndex,\n      siblingIndex\n    }))).map((i, index) => ({\n      ...i,\n      flatIndex: index\n    }));\n    return flattenedRouterPanes;\n  }),\n  // calculate a \"diffIndex\" used for clearing the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.startWith)([]), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_30__.pairwise)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(_ref6 => {\n    let [prev, curr] = _ref6;\n    for (let i = 0; i < curr.length; i++) {\n      const prevValue = prev[i];\n      const currValue = curr[i];\n      if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevValue, currValue)) {\n        return {\n          flattenedRouterPanes: curr,\n          diffIndex: i\n        };\n      }\n    }\n    return {\n      flattenedRouterPanes: curr,\n      diffIndex: curr.length\n    };\n  }),\n  // create the memoized `resolvePane` function and manage the memo cache\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.scan)((acc, next) => {\n    const {\n      cacheKeysByFlatIndex,\n      resolvedPaneCache\n    } = acc;\n    const {\n      flattenedRouterPanes,\n      diffIndex\n    } = next;\n    const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1);\n    const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1);\n    const keysToKeep = new Set(beforeDiffIndex.flatMap(keySet => Array.from(keySet)));\n    const keysToDelete = afterDiffIndex.flatMap(keySet => Array.from(keySet)).filter(key => !keysToKeep.has(key));\n    for (const key of keysToDelete) {\n      resolvedPaneCache.delete(key);\n    }\n    const memoize = nextFn => (unresolvedPane, context, flatIndex) => {\n      const key = unresolvedPane && \"\".concat(assignId(unresolvedPane), \"-\").concat(hashContext(context));\n      const cachedResolvedPane = key && resolvedPaneCache.get(key);\n      if (cachedResolvedPane) return cachedResolvedPane;\n      const result = nextFn(unresolvedPane, context, flatIndex);\n      if (!key) return result;\n      const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || /* @__PURE__ */new Set();\n      cacheKeySet.add(key);\n      cacheKeysByFlatIndex[flatIndex] = cacheKeySet;\n      resolvedPaneCache.set(key, result);\n      return result;\n    };\n    return {\n      flattenedRouterPanes,\n      cacheKeysByFlatIndex,\n      resolvedPaneCache,\n      resolvePane: createPaneResolver(memoize)\n    };\n  }, initialCacheState),\n  // run the memoized, recursive resolving\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.switchMap)(_ref7 => {\n    let {\n      flattenedRouterPanes,\n      resolvePane\n    } = _ref7;\n    return resolvePaneTree({\n      unresolvedPane: rootPaneNode,\n      flattenedRouterPanes,\n      parent: null,\n      path: [],\n      resolvePane,\n      structureContext\n    });\n  }));\n  return resolvedPanes$.pipe(\n  // this diffs the previous emission with the current one. if there is a new\n  // loading pane at the same position where a previous pane already had a\n  // resolved value (looking at the IDs to compare), then return the previous\n  // pane instead of the loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.scan)((prev, next) => next.map((nextPane, index) => {\n    const prevPane = prev[index];\n    if (!prevPane) return nextPane;\n    if (nextPane.type !== \"loading\") return nextPane;\n    if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n      return prevPane;\n    }\n    return nextPane;\n  }), []),\n  // this prevents duplicate emissions\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.distinctUntilChanged)((prev, next) => {\n    if (prev.length !== next.length) return false;\n    for (let i = 0; i < next.length; i++) {\n      const prevValue = prev[i];\n      const nextValue = next[i];\n      if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n        return false;\n      }\n    }\n    return true;\n  }));\n}\nfunction useRouterPanesStream() {\n  const routerStateSubject = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => new rxjs__WEBPACK_IMPORTED_MODULE_33__.ReplaySubject(1), []);\n  const routerPanes$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => routerStateSubject.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(_routerState => (_routerState == null ? void 0 : _routerState.panes) || [])), [routerStateSubject]);\n  const {\n    state: routerState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouter)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    routerStateSubject.next(routerState);\n  }, [routerState, routerStateSubject]);\n  return routerPanes$;\n}\nfunction useResolvedPanes() {\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n  if (error) throw error;\n  const {\n    structureContext,\n    rootPaneNode\n  } = (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.useStructureTool)();\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: []\n  });\n  const routerPanesStream = useRouterPanesStream();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(resolvedPanes => {\n      const routerPanes = resolvedPanes.reduce((acc, next) => {\n        const currentGroup = acc[next.groupIndex] || [];\n        currentGroup[next.siblingIndex] = next.routerPaneSibling;\n        acc[next.groupIndex] = currentGroup;\n        return acc;\n      }, []);\n      const groupsLen = routerPanes.length;\n      const paneDataItems = resolvedPanes.map(pane => {\n        var _a;\n        const {\n          groupIndex,\n          flatIndex,\n          siblingIndex,\n          routerPaneSibling,\n          path\n        } = pane;\n        const itemId = routerPaneSibling.id;\n        const nextGroup = routerPanes[groupIndex + 1];\n        const paneDataItem = {\n          active: groupIndex === groupsLen - 2,\n          childItemId: (_a = nextGroup == null ? void 0 : nextGroup[0].id) != null ? _a : null,\n          index: flatIndex,\n          itemId: routerPaneSibling.id,\n          groupIndex,\n          key: \"\".concat(pane.type === \"loading\" ? \"unknown\" : pane.paneNode.id, \"-\").concat(itemId, \"-\").concat(siblingIndex),\n          pane: pane.type === \"loading\" ? _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LOADING_PANE : pane.paneNode,\n          params: routerPaneSibling.params || {},\n          path: path.join(\";\"),\n          payload: routerPaneSibling.payload,\n          selected: flatIndex === resolvedPanes.length - 1,\n          siblingIndex\n        };\n        return paneDataItem;\n      });\n      return {\n        paneDataItems,\n        routerPanes,\n        resolvedPanes: paneDataItems.map(pane => pane.pane)\n      };\n    }));\n    const subscription = resolvedPanes$.subscribe({\n      next: result => setData(result),\n      error: e => setError(e)\n    });\n    return () => subscription.unsubscribe();\n  }, [rootPaneNode, routerPanesStream, structureContext]);\n  return data;\n}\nasync function ensureDocumentIdAndType(documentStore, id, type) {\n  if (id && type) return {\n    id,\n    type\n  };\n  if (!id && type) return {\n    id: (0,_sanity_uuid__WEBPACK_IMPORTED_MODULE_34__[\"default\"])(),\n    type\n  };\n  if (id && !type) {\n    const resolvedType = await (0,rxjs__WEBPACK_IMPORTED_MODULE_24__.firstValueFrom)(documentStore.resolveTypeForDocument(id));\n    return {\n      id,\n      type: resolvedType\n    };\n  }\n  throw new PaneResolutionError({\n    message: \"Neither document `id` or `type` was provided when trying to resolve intent.\"\n  });\n}\nconst EMPTY_RECORD = {};\nconst IntentResolver = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function IntentResolver2() {\n  const {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouter)();\n  const maybeIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => {\n    const intentName = typeof routerState.intent === \"string\" ? routerState.intent : void 0;\n    return intentName ? {\n      intent: intentName,\n      params: (0,sanity__WEBPACK_IMPORTED_MODULE_17__.isRecord)(routerState.params) ? routerState.params : EMPTY_RECORD,\n      payload: routerState.payload\n    } : void 0;\n  }, []));\n  const {\n    rootPaneNode,\n    structureContext\n  } = (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.useStructureTool)();\n  const documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useDocumentStore)();\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  if (error) throw error;\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (maybeIntent) {\n      const {\n        intent,\n        params,\n        payload\n      } = maybeIntent;\n      let cancelled = false;\n      async function effect() {\n        const {\n          id,\n          type\n        } = await ensureDocumentIdAndType(documentStore, typeof params.id === \"string\" ? params.id : void 0, typeof params.type === \"string\" ? params.type : void 0);\n        if (cancelled) return;\n        const panes = await resolveIntent({\n          intent,\n          params: {\n            ...params,\n            id,\n            type\n          },\n          payload,\n          rootPaneNode,\n          structureContext\n        });\n        if (cancelled) return;\n        navigate({\n          panes\n        }, {\n          replace: true\n        });\n      }\n      effect().catch(setError);\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext]);\n  return null;\n});\nvar __freeze$1 = Object.freeze;\nvar __defProp$1 = Object.defineProperty;\nvar __template$1 = (cooked, raw) => __freeze$1(__defProp$1(cooked, \"raw\", {\n  value: __freeze$1(raw || cooked.slice())\n}));\nvar _a$1;\nconst PathSegment = styled_components__WEBPACK_IMPORTED_MODULE_35__[\"default\"].span(_a$1 || (_a$1 = __template$1([\"\\n  &:not(:last-child)::after {\\n    content: ' \\u279D ';\\n    opacity: 0.5;\\n  }\\n\"])));\nfunction formatStack(stack) {\n  return stack.replace(/\\(\\.\\.\\.\\)\\./g, \"(...)\\n  .\").replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, \"\").replace(/___default\\./g, \".\").replace(new RegExp(\" \\\\(https?:\\\\/\\\\/\".concat(window.location.host), \"g\"), \" (\");\n}\nfunction StructureError(_ref8) {\n  let {\n    error\n  } = _ref8;\n  if (!(error instanceof PaneResolutionError)) {\n    throw error;\n  }\n  const {\n    cause\n  } = error;\n  const {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useTranslation)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.structureLocaleNamespace);\n  const stack = (cause == null ? void 0 : cause.stack) || error.stack;\n  const showStack = stack && !(cause instanceof _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.SerializeError) && !error.message.includes(\"Module build failed:\");\n  const path = cause instanceof _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.SerializeError ? cause.path : [];\n  const helpId = cause instanceof _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.SerializeError && cause.helpId || error.helpId;\n  const handleReload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    window.location.reload();\n  }, []);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Card, {\n    height: \"fill\",\n    overflow: \"auto\",\n    padding: 4,\n    sizing: \"border\",\n    tone: \"critical\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Container, {\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Heading, {\n        as: \"h2\",\n        children: t(\"structure-error.header.text\")\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Card, {\n        marginTop: 4,\n        padding: 4,\n        radius: 2,\n        overflow: \"auto\",\n        shadow: 1,\n        tone: \"inherit\",\n        children: [path.length > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Stack, {\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n            size: 1,\n            weight: \"medium\",\n            children: t(\"structure-error.structure-path.label\")\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Code, {\n            children: path.slice(1).map((segment, i) =>\n            // eslint-disable-next-line react/no-array-index-key\n            /* @__PURE__ */\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PathSegment, {\n              children: segment\n            }, \"\".concat(segment, \"-\").concat(i)))\n          })]\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Stack, {\n          marginTop: 4,\n          space: 2,\n          children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n            size: 1,\n            weight: \"medium\",\n            children: t(\"structure-error.error.label\")\n          }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Code, {\n            children: showStack ? formatStack(stack) : error.message\n          })]\n        }), helpId && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n              href: (0,_sanity_generate_help_url__WEBPACK_IMPORTED_MODULE_27__.generateHelpUrl)(helpId),\n              rel: \"noopener noreferrer\",\n              target: \"_blank\",\n              children: t(\"structure-error.docs-link.text\")\n            })\n          })\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Box, {\n          marginTop: 4,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_getJsonStream_RYwhuhmq_js__WEBPACK_IMPORTED_MODULE_37__.Button, {\n            text: t(\"structure-error.reload-button.text\"),\n            icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_38__.SyncIcon,\n            tone: \"primary\",\n            onClick: handleReload\n          })\n        })]\n      })]\n    })\n  });\n}\nfunction UnknownPane(props) {\n  const {\n    isSelected,\n    pane,\n    paneKey\n  } = props;\n  const type = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.isRecord)(pane) && pane.type || null;\n  const {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useTranslation)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.structureLocaleNamespace);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.Pane, {\n    id: paneKey,\n    selected: isSelected,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.PaneHeader, {\n      title: t(\"panes.unknown-pane-type.title\")\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.PaneContent, {\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Box, {\n        padding: 4,\n        children: typeof type === \"string\" ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n          as: \"p\",\n          muted: true,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_17__.Translate, {\n            t,\n            i18nKey: \"panes.unknown-pane-type.unknown-type.text\",\n            values: {\n              type\n            }\n          })\n        }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n          as: \"p\",\n          muted: true,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_17__.Translate, {\n            t,\n            i18nKey: \"panes.unknown-pane-type.missing-type.text\"\n          })\n        })\n      })\n    })]\n  });\n}\nconst paneMap = {\n  component: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"node_modules_sanity_lib__chunks_index-pIqlMpni_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-pIqlMpni.js */ \"./node_modules/sanity/lib/_chunks/index-pIqlMpni.js\"))),\n  document: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"node_modules_sanity_lib__chunks_pane-DelUyv32_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./pane-DelUyv32.js */ \"./node_modules/sanity/lib/_chunks/pane-DelUyv32.js\"))),\n  documentList: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"node_modules_sanity_lib__chunks_pane-CoYwJxjj_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./pane-CoYwJxjj.js */ \"./node_modules/sanity/lib/_chunks/pane-CoYwJxjj.js\"))),\n  list: (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(() => __webpack_require__.e(/*! import() */ \"node_modules_sanity_lib__chunks_index-DH4YIT_w_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./index-DH4YIT_w.js */ \"./node_modules/sanity/lib/_chunks/index-DH4YIT_w.js\")))\n};\nconst StructureToolPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function StructureToolPane2(props) {\n  const {\n    active,\n    childItemId,\n    groupIndex,\n    index,\n    itemId,\n    pane,\n    paneKey,\n    params,\n    payload,\n    path,\n    selected,\n    siblingIndex\n  } = props;\n  const PaneComponent = paneMap[pane.type] || UnknownPane;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneRouterProvider, {\n    flatIndex: index,\n    index: groupIndex,\n    params,\n    payload,\n    siblingIndex,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n      fallback: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LoadingPane, {\n        paneKey,\n        path,\n        selected\n      }),\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneComponent, {\n        childItemId: childItemId || \"\",\n        index,\n        itemId,\n        isActive: active,\n        isSelected: selected,\n        paneKey,\n        pane\n      })\n    })\n  });\n}, (_ref9, _ref10) => {\n  let {\n    params: prevParams = {},\n    payload: prevPayload = null,\n    ...prev\n  } = _ref9;\n  let {\n    params: nextParams = {},\n    payload: nextPayload = null,\n    ...next\n  } = _ref10;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevParams, nextParams)) return false;\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(prevPayload, nextPayload)) return false;\n  const keys = /* @__PURE__ */new Set([...Object.keys(prev), ...Object.keys(next)]);\n  for (const key of keys) {\n    if (prev[key] !== next[key]) return false;\n  }\n  return true;\n});\nfunction NoDocumentTypesScreen() {\n  const {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useTranslation)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.structureLocaleNamespace);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Card, {\n    height: \"fill\",\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Flex, {\n      align: \"center\",\n      height: \"fill\",\n      justify: \"center\",\n      padding: 4,\n      sizing: \"border\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Container, {\n        width: 0,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Card, {\n          padding: 4,\n          radius: 2,\n          shadow: 1,\n          tone: \"caution\",\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Flex, {\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Box, {\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_38__.WarningOutlineIcon, {})\n              })\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Stack, {\n              flex: 1,\n              marginLeft: 3,\n              space: 3,\n              children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n                as: \"h1\",\n                size: 1,\n                weight: \"medium\",\n                children: t(\"no-document-types-screen.title\")\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: t(\"no-document-types-screen.subtitle\")\n              }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.Text, {\n                as: \"p\",\n                muted: true,\n                size: 1,\n                children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n                  href: \"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\",\n                  target: \"_blank\",\n                  rel: \"noreferrer\",\n                  children: t(\"no-document-types-screen.link-text\")\n                })\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nconst DocumentTitle = props => {\n  const {\n    documentId,\n    documentType\n  } = props;\n  const editState = (0,sanity__WEBPACK_IMPORTED_MODULE_39__.useEditState)(documentId, documentType);\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useSchema)();\n  const {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useTranslation)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.structureLocaleNamespace);\n  const isNewDocument = !(editState == null ? void 0 : editState.published) && !(editState == null ? void 0 : editState.draft);\n  const documentValue = (editState == null ? void 0 : editState.draft) || (editState == null ? void 0 : editState.published);\n  const schemaType = schema.get(documentType);\n  const {\n    value,\n    isLoading: previewValueIsLoading\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useDocumentPreview)({\n    enabled: true,\n    schemaType,\n    value: documentValue\n  });\n  const documentTitle = isNewDocument ? t(\"browser-document-title.new-document\", {\n    schemaType: (schemaType == null ? void 0 : schemaType.title) || (schemaType == null ? void 0 : schemaType.name)\n  }) : (value == null ? void 0 : value.title) || t(\"browser-document-title.untitled-document\");\n  const settled = editState.ready && !previewValueIsLoading;\n  const newTitle = useConstructDocumentTitle(documentTitle);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!settled) return;\n    document.title = newTitle;\n  }, [documentTitle, settled, newTitle]);\n  return null;\n};\nconst PassthroughTitle = props => {\n  const {\n    title\n  } = props;\n  const newTitle = useConstructDocumentTitle(title);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    document.title = newTitle;\n  }, [newTitle, title]);\n  return null;\n};\nconst StructureTitle = props => {\n  const {\n    resolvedPanes\n  } = props;\n  if (!(resolvedPanes == null ? void 0 : resolvedPanes.length)) return null;\n  const lastPane = resolvedPanes[resolvedPanes.length - 1];\n  if (isLoadingPane(lastPane)) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {});\n  }\n  if (isDocumentPane(lastPane)) {\n    if (lastPane == null ? void 0 : lastPane.title) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {\n        title: lastPane.title\n      });\n    }\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentTitle, {\n      documentId: lastPane.options.id,\n      documentType: lastPane.options.type\n    });\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {\n    title: lastPane == null ? void 0 : lastPane.title\n  });\n};\nfunction useConstructDocumentTitle(activeTitle) {\n  const structureToolBaseTitle = (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.useStructureTool)().structureContext.title;\n  return [activeTitle, structureToolBaseTitle].filter(title => title).join(\" | \");\n}\nfunction isDocumentPane(pane) {\n  return pane !== _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LOADING_PANE && pane.type === \"document\";\n}\nfunction isLoadingPane(pane) {\n  return pane === _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LOADING_PANE;\n}\nvar __freeze = Object.freeze;\nvar __defProp = Object.defineProperty;\nvar __template = (cooked, raw) => __freeze(__defProp(cooked, \"raw\", {\n  value: __freeze(raw || cooked.slice())\n}));\nvar _a;\nconst StyledPaneLayout = (0,styled_components__WEBPACK_IMPORTED_MODULE_35__[\"default\"])(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.PaneLayout)(_a || (_a = __template([\"\\n  min-height: 100%;\\n  min-width: 320px;\\n\"])));\nconst isSaveHotkey = (0,is_hotkey__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(\"mod+s\");\nconst StructureTool = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function StructureTool2(_ref11) {\n  let {\n    onPaneChange\n  } = _ref11;\n  var _a2;\n  const {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.useToast)();\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useSchema)();\n  const {\n    layoutCollapsed,\n    setLayoutCollapsed\n  } = (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.useStructureTool)();\n  const {\n    paneDataItems,\n    resolvedPanes\n  } = useResolvedPanes();\n  const isResolvingIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_14__.useRouterState)((0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(routerState => typeof routerState.intent === \"string\", []));\n  const {\n    sanity: {\n      media\n    }\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.useTheme)();\n  const [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const handleRootCollapse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(true), [setLayoutCollapsed]);\n  const handleRootExpand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setLayoutCollapsed(false), [setLayoutCollapsed]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes);\n    }\n  }, [onPaneChange, resolvedPanes]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handleGlobalKeyDown = event => {\n      if (isSaveHotkey(event)) {\n        event.preventDefault();\n        pushToast({\n          closable: true,\n          id: \"auto-save-message\",\n          status: \"info\",\n          title: \"Your work is automatically saved!\",\n          duration: 4e3\n        });\n      }\n    };\n    window.addEventListener(\"keydown\", handleGlobalKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleGlobalKeyDown);\n  }, [pushToast]);\n  const hasDefinedDocumentTypes = (_a2 = schema._original) == null ? void 0 : _a2.types.some(sanity__WEBPACK_IMPORTED_MODULE_39__._isCustomDocumentTypeDefinition);\n  if (!hasDefinedDocumentTypes) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NoDocumentTypesScreen, {});\n  }\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.PortalProvider, {\n    element: portalElement || null,\n    children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledPaneLayout, {\n      flex: 1,\n      height: layoutCollapsed ? void 0 : \"fill\",\n      minWidth: media[1],\n      onCollapse: handleRootCollapse,\n      onExpand: handleRootExpand,\n      children: [paneDataItems.map(_ref12 => {\n        let {\n          active,\n          childItemId,\n          groupIndex,\n          itemId,\n          key: paneKey,\n          pane,\n          index: paneIndex,\n          params: paneParams,\n          path,\n          payload,\n          siblingIndex,\n          selected\n        } = _ref12;\n        return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n          children: pane === _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LOADING_PANE ? /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LoadingPane, {\n            paneKey,\n            path,\n            selected\n          }) : /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureToolPane, {\n            active,\n            groupIndex,\n            index: paneIndex,\n            pane,\n            childItemId,\n            itemId,\n            paneKey,\n            params: paneParams,\n            payload,\n            path,\n            selected,\n            siblingIndex\n          })\n        }, \"\".concat(pane === _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LOADING_PANE ? \"loading\" : pane.type, \"-\").concat(paneIndex));\n      }), paneDataItems.length <= 1 && isResolvingIntent && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.LoadingPane, {\n        paneKey: \"intent-resolver\"\n      })]\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTitle, {\n      resolvedPanes\n    }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      \"data-portal\": \"\",\n      ref: setPortalElement\n    })]\n  });\n});\nfunction StructureToolBoundary(_ref13) {\n  let {\n    tool: {\n      options\n    }\n  } = _ref13;\n  const {\n    unstable_sources: sources\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_17__.useWorkspace)();\n  const [firstSource] = sources;\n  const {\n    source,\n    defaultDocumentNode,\n    structure\n  } = options || {};\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.setActivePanes)([]);\n    return () => (0,_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.setActivePanes)([]);\n  }, []);\n  const [{\n    error\n  }, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    error: null\n  });\n  if (error) return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureError, {\n    error\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_36__.ErrorBoundary, {\n    onCatch: setError,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_17__.SourceProvider, {\n      name: source || firstSource.name,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.StructureToolProvider, {\n        defaultDocumentNode,\n        structure,\n        children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTool, {\n          onPaneChange: _StructureToolProvider_CK141bsB_js__WEBPACK_IMPORTED_MODULE_15__.setActivePanes\n        }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IntentResolver, {})]\n      })\n    })\n  });\n}\n\n//# sourceMappingURL=index-Bn6gWj4A.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzL2luZGV4LUJuNmdXajRBLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QztBQUN5RjtBQUNyQztBQUMrRjtBQUMySDtBQUNsUTtBQUN4QjtBQUMwRDtBQUM1RDtBQUMwRjtBQUM5RDtBQUNwQjtBQUNKO0FBQ3lCO0FBQ3RCO0FBQ2M7QUFDeEI7QUFDUjtBQUNPO0FBQ1Y7QUFDTTtBQUNLO0FBQ0w7QUFDSztBQUNJO0FBQ2E7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFLHlEQUFTO0FBQ2Ysc0JBQXNCLDhEQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLElBQUksRUFBRSxrRkFBYTtBQUNuQiwyQkFBMkIsOENBQU87QUFDbEMsbUJBQW1CLDhDQUFPO0FBQzFCO0FBQ0EsZ0NBQWdDLGtEQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDZCQUE2QixrREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxxQkFBcUIsa0RBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxvQkFBb0Isa0RBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCw4QkFBOEIsa0RBQVc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFRO0FBQ2pDO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0gsY0FBYyw4Q0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSwwQkFBMEIseUVBQVE7QUFDbEM7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIscURBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHdCQUF3QixzREFBRyxDQUFDLGtGQUFpQjtBQUM3QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtDQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxpREFBUTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDhEQUFhLEtBQUsseURBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHFDQUFxQyxtREFBWTtBQUNqRCxhQUFhLDJDQUFJLHNCQUFzQiwwREFBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUNBQUU7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscURBQUk7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscURBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMERBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxlQUFlLHlDQUFFO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsYUFBYSw2Q0FBTTtBQUNuQjtB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QUFjO0FBQ3RDLFNBQVMsa0JBQWtCLHNEQUFHLG1CQUFtQjtBQUNqRCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUM0QztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzL2luZGV4LUJuNmdXajRBLmpzPzk5ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBqc3hzIH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgQ2FyZCwgQ29udGFpbmVyLCBIZWFkaW5nLCBTdGFjaywgVGV4dCwgQ29kZSwgQm94LCBGbGV4LCB1c2VUb2FzdCwgdXNlVGhlbWUsIFBvcnRhbFByb3ZpZGVyLCBFcnJvckJvdW5kYXJ5IH0gZnJvbSAnQHNhbml0eS91aSc7XG5pbXBvcnQgeyB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlU3RhdGUsIHVzZUVmZmVjdCwgbWVtbywgbGF6eSwgU3VzcGVuc2UsIEZyYWdtZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaXNSZWNvcmQsIHVzZURvY3VtZW50U3RvcmUsIHVzZVRyYW5zbGF0aW9uLCBUcmFuc2xhdGUsIHVzZUVkaXRTdGF0ZSwgdXNlU2NoZW1hLCB1bnN0YWJsZV91c2VWYWx1ZVByZXZpZXcsIF9pc0N1c3RvbURvY3VtZW50VHlwZURlZmluaXRpb24sIHVzZVdvcmtzcGFjZSwgU291cmNlUHJvdmlkZXIgfSBmcm9tICdzYW5pdHknO1xuaW1wb3J0IHsgdXNlUGFuZUxheW91dCwgQ2hpbGRMaW5rLCBCYWNrTGluaywgUmVmZXJlbmNlQ2hpbGRMaW5rLCBQYXJhbWV0ZXJpemVkTGluaywgUGFuZVJvdXRlckNvbnRleHQsIHVzZVN0cnVjdHVyZVRvb2wsIExPQURJTkdfUEFORSwgc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlLCBTZXJpYWxpemVFcnJvciwgUGFuZSwgUGFuZUhlYWRlciwgUGFuZUNvbnRlbnQsIExvYWRpbmdQYW5lLCBQYW5lTGF5b3V0LCBzZXRBY3RpdmVQYW5lcywgU3RydWN0dXJlVG9vbFByb3ZpZGVyIH0gZnJvbSAnLi9TdHJ1Y3R1cmVUb29sUHJvdmlkZXItQ0sxNDFic0IuanMnO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZXJTdGF0ZSB9IGZyb20gJ3Nhbml0eS9yb3V0ZXInO1xuaW1wb3J0IG9taXQgZnJvbSAnbG9kYXNoL29taXQuanMnO1xuaW1wb3J0IHsgaXNPYnNlcnZhYmxlLCBmcm9tLCBvZiwgZmlyc3RWYWx1ZUZyb20sIE5FVkVSLCBjb25jYXQsIFJlcGxheVN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCc7XG5pbXBvcnQgeyBzd2l0Y2hNYXAsIHB1Ymxpc2hSZXBsYXksIHJlZkNvdW50LCBtYXAsIHN0YXJ0V2l0aCwgcGFpcndpc2UsIHNjYW4sIGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVIZWxwVXJsIH0gZnJvbSAnQHNhbml0eS9nZW5lcmF0ZS1oZWxwLXVybCc7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbC5qcyc7XG5pbXBvcnQgeyB1dWlkIH0gZnJvbSAnQHNhbml0eS91dWlkJztcbmltcG9ydCB7IFN5bmNJY29uLCBXYXJuaW5nT3V0bGluZUljb24gfSBmcm9tICdAc2FuaXR5L2ljb25zJztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi9nZXRKc29uU3RyZWFtLVJZd2h1aG1xLmpzJztcbmltcG9ydCAnbG9kYXNoL2NhbWVsQ2FzZS5qcyc7XG5pbXBvcnQgJ3NwZWFraW5ndXJsJztcbmltcG9ydCAnbG9kYXNoL3VuaXF1ZUlkLmpzJztcbmltcG9ydCAncmVhY3QtaXMnO1xuaW1wb3J0ICdsb2Rhc2gvdW5pcS5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9rZWJhYkNhc2UuanMnO1xuaW1wb3J0ICdsb2Rhc2gvZmluZC5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9zdGFydENhc2UuanMnO1xuaW1wb3J0IGlzSG90a2V5IGZyb20gJ2lzLWhvdGtleSc7XG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gJ0BzYW5pdHkvdXRpbC9wYXRocyc7XG5jb25zdCBlbXB0eUFycmF5ID0gW107XG5mdW5jdGlvbiBQYW5lUm91dGVyUHJvdmlkZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNoaWxkcmVuLFxuICAgIGZsYXRJbmRleCxcbiAgICBpbmRleCxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBzaWJsaW5nSW5kZXhcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgbmF2aWdhdGUsXG4gICAgbmF2aWdhdGVJbnRlbnQsXG4gICAgcmVzb2x2ZVBhdGhGcm9tU3RhdGVcbiAgfSA9IHVzZVJvdXRlcigpO1xuICBjb25zdCByb3V0ZXJTdGF0ZSA9IHVzZVJvdXRlclN0YXRlKCk7XG4gIGNvbnN0IHtcbiAgICBwYW5lcyxcbiAgICBleHBhbmRcbiAgfSA9IHVzZVBhbmVMYXlvdXQoKTtcbiAgY29uc3Qgcm91dGVyUGFuZUdyb3VwcyA9IHVzZU1lbW8oKCkgPT4gKHJvdXRlclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTdGF0ZS5wYW5lcykgfHwgZW1wdHlBcnJheSwgW3JvdXRlclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTdGF0ZS5wYW5lc10pO1xuICBjb25zdCBsYXN0UGFuZSA9IHVzZU1lbW8oKCkgPT4gcGFuZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhbmVzW3BhbmVzLmxlbmd0aCAtIDJdLCBbcGFuZXNdKTtcbiAgY29uc3QgZ3JvdXBJbmRleCA9IGluZGV4IC0gMTtcbiAgY29uc3QgY3JlYXRlTmV4dFJvdXRlclN0YXRlID0gdXNlQ2FsbGJhY2sobW9kaWZpZXIgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRHcm91cCA9IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gfHwgW107XG4gICAgY29uc3QgY3VycmVudEl0ZW0gPSBjdXJyZW50R3JvdXBbc2libGluZ0luZGV4XTtcbiAgICBjb25zdCBuZXh0R3JvdXAgPSBtb2RpZmllcihjdXJyZW50R3JvdXAsIGN1cnJlbnRJdGVtKTtcbiAgICBjb25zdCBuZXh0UGFuZXMgPSBbLi4ucm91dGVyUGFuZUdyb3Vwcy5zbGljZSgwLCBncm91cEluZGV4KSwgbmV4dEdyb3VwLCAuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKGdyb3VwSW5kZXggKyAxKV07XG4gICAgY29uc3QgbmV4dFJvdXRlclN0YXRlID0ge1xuICAgICAgLi4uKHJvdXRlclN0YXRlIHx8IHt9KSxcbiAgICAgIHBhbmVzOiBuZXh0UGFuZXNcbiAgICB9O1xuICAgIHJldHVybiBuZXh0Um91dGVyU3RhdGU7XG4gIH0sIFtncm91cEluZGV4LCByb3V0ZXJQYW5lR3JvdXBzLCByb3V0ZXJTdGF0ZSwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IG1vZGlmeUN1cnJlbnRHcm91cCA9IHVzZUNhbGxiYWNrKG1vZGlmaWVyID0+IHtcbiAgICBjb25zdCBuZXh0Um91dGVyU3RhdGUgPSBjcmVhdGVOZXh0Um91dGVyU3RhdGUobW9kaWZpZXIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gbmF2aWdhdGUobmV4dFJvdXRlclN0YXRlKSwgMCk7XG4gICAgcmV0dXJuIG5leHRSb3V0ZXJTdGF0ZTtcbiAgfSwgW2NyZWF0ZU5leHRSb3V0ZXJTdGF0ZSwgbmF2aWdhdGVdKTtcbiAgY29uc3QgY3JlYXRlUGF0aFdpdGhQYXJhbXMgPSB1c2VDYWxsYmFjayhuZXh0UGFyYW1zID0+IHtcbiAgICBjb25zdCBuZXh0Um91dGVyU3RhdGUgPSBjcmVhdGVOZXh0Um91dGVyU3RhdGUoKHNpYmxpbmdzLCBpdGVtKSA9PiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHBhcmFtczogbmV4dFBhcmFtc1xuICAgIH0sIC4uLnNpYmxpbmdzLnNsaWNlKHNpYmxpbmdJbmRleCArIDEpXSk7XG4gICAgcmV0dXJuIHJlc29sdmVQYXRoRnJvbVN0YXRlKG5leHRSb3V0ZXJTdGF0ZSk7XG4gIH0sIFtjcmVhdGVOZXh0Um91dGVyU3RhdGUsIHJlc29sdmVQYXRoRnJvbVN0YXRlLCBzaWJsaW5nSW5kZXhdKTtcbiAgY29uc3Qgc2V0UGF5bG9hZCA9IHVzZUNhbGxiYWNrKG5leHRQYXlsb2FkID0+IHtcbiAgICBtb2RpZnlDdXJyZW50R3JvdXAoKHNpYmxpbmdzLCBpdGVtKSA9PiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHBheWxvYWQ6IG5leHRQYXlsb2FkXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IHNldFBhcmFtcyA9IHVzZUNhbGxiYWNrKG5leHRQYXJhbXMgPT4ge1xuICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3MsIGl0ZW0pID0+IFsuLi5zaWJsaW5ncy5zbGljZSgwLCBzaWJsaW5nSW5kZXgpLCB7XG4gICAgICAuLi5pdGVtLFxuICAgICAgcGFyYW1zOiBuZXh0UGFyYW1zXG4gICAgfSwgLi4uc2libGluZ3Muc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgW21vZGlmeUN1cnJlbnRHcm91cCwgc2libGluZ0luZGV4XSk7XG4gIGNvbnN0IGhhbmRsZUVkaXRSZWZlcmVuY2UgPSB1c2VDYWxsYmFjayhfcmVmID0+IHtcbiAgICBsZXQge1xuICAgICAgaWQsXG4gICAgICBwYXJlbnRSZWZQYXRoLFxuICAgICAgdHlwZSxcbiAgICAgIHRlbXBsYXRlXG4gICAgfSA9IF9yZWY7XG4gICAgbmF2aWdhdGUoe1xuICAgICAgcGFuZXM6IFsuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKDAsIGdyb3VwSW5kZXggKyAxKSwgW3tcbiAgICAgICAgaWQsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZS5pZCxcbiAgICAgICAgICBwYXJlbnRSZWZQYXRoOiB0b1N0cmluZyhwYXJlbnRSZWZQYXRoKSxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0sXG4gICAgICAgIHBheWxvYWQ6IHRlbXBsYXRlLnBhcmFtc1xuICAgICAgfV1dXG4gICAgfSk7XG4gIH0sIFtncm91cEluZGV4LCBuYXZpZ2F0ZSwgcm91dGVyUGFuZUdyb3Vwc10pO1xuICBjb25zdCBjdHggPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgLy8gWmVyby1iYXNlZCBpbmRleCAocG9zaXRpb24pIG9mIHBhbmUsIHZpc3VhbGx5XG4gICAgaW5kZXg6IGZsYXRJbmRleCxcbiAgICAvLyBaZXJvLWJhc2VkIGluZGV4IG9mIHBhbmUgZ3JvdXAgKHdpdGhpbiBVUkwgc3RydWN0dXJlKVxuICAgIGdyb3VwSW5kZXgsXG4gICAgLy8gWmVyby1iYXNlZCBpbmRleCBvZiBwYW5lIHdpdGhpbiBzaWJsaW5nIGdyb3VwXG4gICAgc2libGluZ0luZGV4LFxuICAgIC8vIFBheWxvYWQgb2YgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHBheWxvYWQsXG4gICAgLy8gUGFyYW1zIG9mIHRoZSBjdXJyZW50IHBhbmVcbiAgICBwYXJhbXMsXG4gICAgLy8gV2hldGhlciBvciBub3QgdGhlIHBhbmUgaGFzIGFueSBzaWJsaW5ncyAod2l0aGluIHRoZSBzYW1lIGdyb3VwKVxuICAgIGhhc0dyb3VwU2libGluZ3M6IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gPyByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdLmxlbmd0aCA+IDEgOiBmYWxzZSxcbiAgICAvLyBUaGUgbGVuZ3RoIG9mIHRoZSBjdXJyZW50IGdyb3VwXG4gICAgZ3JvdXBMZW5ndGg6IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gPyByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdLmxlbmd0aCA6IDAsXG4gICAgLy8gQ3VycmVudCByb3V0ZXIgc3RhdGUgZm9yIHRoZSBcInBhbmVzXCIgcHJvcGVydHlcbiAgICByb3V0ZXJQYW5lc1N0YXRlOiByb3V0ZXJQYW5lR3JvdXBzLFxuICAgIC8vIEN1cnJpZWQgU3RhdGVMaW5rIHRoYXQgcGFzc2VzIHRoZSBjb3JyZWN0IHN0YXRlIGF1dG9tYXRpY2FsbHlcbiAgICBDaGlsZExpbmssXG4gICAgLy8gQ3VycmllZCBTdGF0ZUxpbmsgdGhhdCBwb3BzIG9mZiB0aGUgbGFzdCBwYW5lIGdyb3VwXG4gICAgLy8gT25seSBwYXNzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCBwYW5lXG4gICAgQmFja0xpbms6IGZsYXRJbmRleCA/IEJhY2tMaW5rIDogdm9pZCAwLFxuICAgIC8vIEEgc3BlY2lhbGl6ZWQgYENoaWxkTGlua2AgdGhhdCB0YWtlcyBpbiB0aGUgbmVlZGVkIHByb3BzIHRvIG9wZW4gYVxuICAgIC8vIHJlZmVyZW5jZWQgZG9jdW1lbnQgdG8gdGhlIHJpZ2h0XG4gICAgUmVmZXJlbmNlQ2hpbGRMaW5rLFxuICAgIC8vIFNpbWlsYXIgdG8gYFJlZmVyZW5jZUNoaWxkTGlua2AgZXhwZWN0IHdpdGhvdXQgdGhlIHdyYXBwaW5nIGNvbXBvbmVudFxuICAgIGhhbmRsZUVkaXRSZWZlcmVuY2UsXG4gICAgLy8gQ3VycmllZCBTdGF0ZUxpbmsgdGhhdCBwYXNzZWQgdGhlIGNvcnJlY3Qgc3RhdGUsIGJ1dCBtZXJnZXMgcGFyYW1zL3BheWxvYWRcbiAgICBQYXJhbWV0ZXJpemVkTGluayxcbiAgICAvLyBSZXBsYWNlcyB0aGUgY3VycmVudCBwYW5lIHdpdGggYSBuZXcgb25lXG4gICAgcmVwbGFjZUN1cnJlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoKSA9PiBbe1xuICAgICAgICBpZDogb3B0cy5pZCB8fCBcIlwiLFxuICAgICAgICBwYXlsb2FkOiBvcHRzLnBheWxvYWQsXG4gICAgICAgIHBhcmFtczogb3B0cy5wYXJhbXMgfHwge31cbiAgICAgIH1dKTtcbiAgICB9LFxuICAgIC8vIFJlbW92ZXMgdGhlIGN1cnJlbnQgcGFuZSBmcm9tIHRoZSBncm91cFxuICAgIGNsb3NlQ3VycmVudDogKCkgPT4ge1xuICAgICAgbW9kaWZ5Q3VycmVudEdyb3VwKChzaWJsaW5ncywgaXRlbSkgPT4gc2libGluZ3MubGVuZ3RoID4gMSA/IHNpYmxpbmdzLmZpbHRlcihzaWJsaW5nID0+IHNpYmxpbmcgIT09IGl0ZW0pIDogc2libGluZ3MpO1xuICAgIH0sXG4gICAgLy8gUmVtb3ZlcyBhbGwgcGFuZXMgdG8gdGhlIHJpZ2h0IGluY2x1ZGluZyBjdXJyZW50XG4gICAgY2xvc2VDdXJyZW50QW5kQWZ0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBleHBhbmRMYXN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlO1xuICAgICAgaWYgKGV4cGFuZExhc3QgJiYgbGFzdFBhbmUpIHtcbiAgICAgICAgZXhwYW5kKGxhc3RQYW5lLmVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgbmF2aWdhdGUoe1xuICAgICAgICBwYW5lczogWy4uLnJvdXRlclBhbmVHcm91cHMuc2xpY2UoMCwgZ3JvdXBJbmRleCldXG4gICAgICB9LCB7XG4gICAgICAgIHJlcGxhY2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gRHVwbGljYXRlIHRoZSBjdXJyZW50IHBhbmUsIHdpdGggb3B0aW9uYWwgb3ZlcnJpZGVzIGZvciBwYXlsb2FkLCBwYXJhbWV0ZXJzXG4gICAgZHVwbGljYXRlQ3VycmVudDogb3B0aW9ucyA9PiB7XG4gICAgICBtb2RpZnlDdXJyZW50R3JvdXAoKHNpYmxpbmdzLCBpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZWRJdGVtID0ge1xuICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgcGF5bG9hZDogKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMucGF5bG9hZCkgfHwgaXRlbS5wYXlsb2FkLFxuICAgICAgICAgIHBhcmFtczogKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMucGFyYW1zKSB8fCBpdGVtLnBhcmFtc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gWy4uLnNpYmxpbmdzLnNsaWNlKDAsIHNpYmxpbmdJbmRleCksIGR1cGxpY2F0ZWRJdGVtLCAuLi5zaWJsaW5ncy5zbGljZShzaWJsaW5nSW5kZXgpXTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gU2V0IHRoZSB2aWV3IGZvciB0aGUgY3VycmVudCBwYW5lXG4gICAgc2V0Vmlldzogdmlld0lkID0+IHtcbiAgICAgIGNvbnN0IHJlc3RQYXJhbXMgPSBvbWl0KHBhcmFtcywgXCJ2aWV3XCIpO1xuICAgICAgcmV0dXJuIHNldFBhcmFtcyh2aWV3SWQgPyB7XG4gICAgICAgIC4uLnJlc3RQYXJhbXMsXG4gICAgICAgIHZpZXc6IHZpZXdJZFxuICAgICAgfSA6IHJlc3RQYXJhbXMpO1xuICAgIH0sXG4gICAgLy8gU2V0IHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgY3VycmVudCBwYW5lXG4gICAgc2V0UGFyYW1zLFxuICAgIC8vIFNldCB0aGUgcGF5bG9hZCBmb3IgdGhlIGN1cnJlbnQgcGFuZVxuICAgIHNldFBheWxvYWQsXG4gICAgLy8gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwYXRoIHdpdGggdGhlIGdpdmVuIHBhcmFtZXRlcnNcbiAgICBjcmVhdGVQYXRoV2l0aFBhcmFtcyxcbiAgICAvLyBQcm94aWVkIG5hdmlnYXRpb24gdG8gYSBnaXZlbiBpbnRlbnQuIENvbnNpZGVyIGp1c3QgZXhwb3NpbmcgYHJvdXRlcmAgaW5zdGVhZD9cbiAgICBuYXZpZ2F0ZUludGVudFxuICB9KSwgW2ZsYXRJbmRleCwgZ3JvdXBJbmRleCwgc2libGluZ0luZGV4LCBwYXlsb2FkLCBwYXJhbXMsIHJvdXRlclBhbmVHcm91cHMsIGhhbmRsZUVkaXRSZWZlcmVuY2UsIHNldFBhcmFtcywgc2V0UGF5bG9hZCwgY3JlYXRlUGF0aFdpdGhQYXJhbXMsIG5hdmlnYXRlSW50ZW50LCBtb2RpZnlDdXJyZW50R3JvdXAsIGxhc3RQYW5lLCBuYXZpZ2F0ZSwgZXhwYW5kXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFuZVJvdXRlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogY3R4LFxuICAgIGNoaWxkcmVuXG4gIH0pO1xufVxuY2xhc3MgUGFuZVJlc29sdXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoX3JlZjIpIHtcbiAgICBsZXQge1xuICAgICAgbWVzc2FnZSxcbiAgICAgIGNvbnRleHQsXG4gICAgICBoZWxwSWQsXG4gICAgICBjYXVzZVxuICAgIH0gPSBfcmVmMjtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuaGVscElkID0gaGVscElkO1xuICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuY29uc3QgcmFuZG9tSWRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhc3NpZ25JZChvYmopIHtcbiAgY29uc3QgY2FjaGVkVmFsdWUgPSByYW5kb21JZENhY2hlLmdldChvYmopO1xuICBpZiAoY2FjaGVkVmFsdWUpIHJldHVybiBjYWNoZWRWYWx1ZTtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgcmFuZG9tSWRDYWNoZS5zZXQob2JqLCBpZCk7XG4gIHJldHVybiBpZDtcbn1cbmNvbnN0IGlzUHJvbWlzZSA9IHRoaW5nID0+IHtcbiAgcmV0dXJuICEhdGhpbmcgJiYgdHlwZW9mICh0aGluZyA9PSBudWxsID8gdm9pZCAwIDogdGhpbmcudGhlbikgPT09IFwiZnVuY3Rpb25cIjtcbn07XG5jb25zdCBpc1NlcmlhbGl6YWJsZSA9IHRoaW5nID0+IHtcbiAgaWYgKCFpc1JlY29yZCh0aGluZykpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHR5cGVvZiB0aGluZy5zZXJpYWxpemUgPT09IFwiZnVuY3Rpb25cIjtcbn07XG5jb25zdCByZXRocm93V2l0aFBhbmVSZXNvbHV0aW9uRXJyb3JzID0gbmV4dCA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXh0KHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBQYW5lUmVzb2x1dGlvbkVycm9yKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGFuZVJlc29sdXRpb25FcnJvcih7XG4gICAgICBtZXNzYWdlOiB0eXBlb2YgKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUubWVzc2FnZSkgPT09IFwic3RyaW5nXCIgPyBlLm1lc3NhZ2UgOiBcIlwiLFxuICAgICAgY29udGV4dCxcbiAgICAgIGNhdXNlOiBlXG4gICAgfSk7XG4gIH1cbn07XG5jb25zdCB3cmFwV2l0aFB1Ymxpc2hSZXBsYXkgPSBuZXh0ID0+IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5leHQoLi4uYXJndW1lbnRzKS5waXBlKFxuICAvLyBuZWVkIHRvIGFkZCBwdWJsaXNoUmVwbGF5ICsgcmVmQ291bnQgdG8gZW5zdXJlIG5ldyBzdWJzY3JpYmVycyBhbHdheXNcbiAgLy8gZ2V0IGFuIGVtaXNzaW9uLiB3aXRob3V0IHRoaXMsIG1lbW9pemVkIG9ic2VydmFibGVzIG1heSBnZXQgc3R1Y2tcbiAgLy8gd2FpdGluZyBmb3IgdGhlaXIgZmlyc3QgZW1pc3Npb25zIHJlc3VsdGluZyBpbiBhIGxvYWRpbmcgcGFuZVxuICBwdWJsaXNoUmVwbGF5KDEpLCByZWZDb3VudCgpKTtcbn07XG5mdW5jdGlvbiBjcmVhdGVQYW5lUmVzb2x2ZXIobWlkZGxld2FyZSkge1xuICBjb25zdCByZXNvbHZlUGFuZSA9IHJldGhyb3dXaXRoUGFuZVJlc29sdXRpb25FcnJvcnMod3JhcFdpdGhQdWJsaXNoUmVwbGF5KG1pZGRsZXdhcmUoKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICBpZiAoIXVucmVzb2x2ZWRQYW5lKSB7XG4gICAgICB0aHJvdyBuZXcgUGFuZVJlc29sdXRpb25FcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IFwiUGFuZSByZXR1cm5lZCBubyBjaGlsZFwiLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBoZWxwSWQ6IFwic3RydWN0dXJlLWl0ZW0tcmV0dXJuZWQtbm8tY2hpbGRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2UodW5yZXNvbHZlZFBhbmUpIHx8IGlzT2JzZXJ2YWJsZSh1bnJlc29sdmVkUGFuZSkpIHtcbiAgICAgIHJldHVybiBmcm9tKHVucmVzb2x2ZWRQYW5lKS5waXBlKHN3aXRjaE1hcChyZXN1bHQgPT4gcmVzb2x2ZVBhbmUocmVzdWx0LCBjb250ZXh0LCBmbGF0SW5kZXgpKSk7XG4gICAgfVxuICAgIGlmIChpc1NlcmlhbGl6YWJsZSh1bnJlc29sdmVkUGFuZSkpIHtcbiAgICAgIHJldHVybiByZXNvbHZlUGFuZSh1bnJlc29sdmVkUGFuZS5zZXJpYWxpemUoY29udGV4dCksIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdW5yZXNvbHZlZFBhbmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lKGNvbnRleHQuaWQsIGNvbnRleHQpLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gb2YodW5yZXNvbHZlZFBhbmUpO1xuICB9KSkpO1xuICByZXR1cm4gcmVzb2x2ZVBhbmU7XG59XG5jb25zdCBiaW5kQ2FjaGUgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gbWVtb0JpbmQob2JqLCBtZXRob2RLZXkpIHtcbiAgY29uc3QgYm91bmRNZXRob2RzID0gYmluZENhY2hlLmdldChvYmopIHx8IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgaWYgKGJvdW5kTWV0aG9kcykge1xuICAgIGNvbnN0IGJvdW5kMiA9IGJvdW5kTWV0aG9kcy5nZXQobWV0aG9kS2V5KTtcbiAgICBpZiAoYm91bmQyKSByZXR1cm4gYm91bmQyO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IG9ialttZXRob2RLZXldO1xuICBpZiAodHlwZW9mIG1ldGhvZCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgcHJvcGVydHkgYFwiLmNvbmNhdChtZXRob2RLZXksIFwiYCB0byBiZSBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIpLmNvbmNhdCh0eXBlb2YgbWV0aG9kLCBcIiBpbnN0ZWFkLlwiKSk7XG4gIH1cbiAgY29uc3QgYm91bmQgPSBtZXRob2QuYmluZChvYmopO1xuICBib3VuZE1ldGhvZHMuc2V0KG1ldGhvZEtleSwgYm91bmQpO1xuICBiaW5kQ2FjaGUuc2V0KG9iaiwgYm91bmRNZXRob2RzKTtcbiAgcmV0dXJuIGJvdW5kO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVudChvcHRpb25zKSB7XG4gIGNvbnN0IHJlc29sdmVkUGFuZUNhY2hlID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICBjb25zdCBtZW1vaXplID0gbmV4dEZuID0+ICh1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KSA9PiB7XG4gICAgY29uc3Qga2V5ID0gdW5yZXNvbHZlZFBhbmUgJiYgXCJcIi5jb25jYXQoYXNzaWduSWQodW5yZXNvbHZlZFBhbmUpLCBcIi1cIikuY29uY2F0KGNvbnRleHQucGF0aC5qb2luKFwiX19cIikpO1xuICAgIGNvbnN0IGNhY2hlZFJlc29sdmVkUGFuZSA9IGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5nZXQoa2V5KTtcbiAgICBpZiAoY2FjaGVkUmVzb2x2ZWRQYW5lKSByZXR1cm4gY2FjaGVkUmVzb2x2ZWRQYW5lO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5leHRGbih1bnJlc29sdmVkUGFuZSwgY29udGV4dCwgZmxhdEluZGV4KTtcbiAgICBpZiAoa2V5KSByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGNvbnN0IHJlc29sdmVQYW5lID0gY3JlYXRlUGFuZVJlc29sdmVyKG1lbW9pemUpO1xuICBjb25zdCBmYWxsYmFja0VkaXRvclBhbmVzID0gW1t7XG4gICAgaWQ6IFwiX19lZGl0X19cIi5jb25jYXQob3B0aW9ucy5wYXJhbXMuaWQpLFxuICAgIHBhcmFtczoge1xuICAgICAgLi4ub21pdChvcHRpb25zLnBhcmFtcywgW1wiaWRcIl0pLFxuICAgICAgdHlwZTogb3B0aW9ucy5wYXJhbXMudHlwZVxuICAgIH0sXG4gICAgcGF5bG9hZDogb3B0aW9ucy5wYXlsb2FkXG4gIH1dXTtcbiAgYXN5bmMgZnVuY3Rpb24gdHJhdmVyc2UoX3JlZjMpIHtcbiAgICBsZXQge1xuICAgICAgY3VycmVudElkLFxuICAgICAgZmxhdEluZGV4LFxuICAgICAgaW50ZW50LFxuICAgICAgcGFyYW1zLFxuICAgICAgcGFyZW50LFxuICAgICAgcGF0aCxcbiAgICAgIHBheWxvYWQsXG4gICAgICB1bnJlc29sdmVkUGFuZSxcbiAgICAgIGxldmVsSW5kZXgsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSA9IF9yZWYzO1xuICAgIHZhciBfYTtcbiAgICBpZiAoIXVucmVzb2x2ZWRQYW5lKSByZXR1cm4gW107XG4gICAgY29uc3Qge1xuICAgICAgaWQ6IHRhcmdldElkLFxuICAgICAgdHlwZTogc2NoZW1hVHlwZU5hbWUsXG4gICAgICAuLi5vdGhlclBhcmFtc1xuICAgIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIGlkOiBjdXJyZW50SWQsXG4gICAgICBzcGxpdEluZGV4OiAwLFxuICAgICAgcGFyZW50LFxuICAgICAgcGF0aCxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgcGF5bG9hZDogdm9pZCAwLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH07XG4gICAgY29uc3QgcmVzb2x2ZWRQYW5lID0gYXdhaXQgZmlyc3RWYWx1ZUZyb20ocmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkpO1xuICAgIGlmIChyZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudFwiICYmIHJlc29sdmVkUGFuZS5pZCA9PT0gdGFyZ2V0SWQpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBwYW5lczogWy4uLnBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKS5tYXAoaSA9PiBbe1xuICAgICAgICAgIGlkOiBpXG4gICAgICAgIH1dKSwgW3tcbiAgICAgICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICAgICAgcGFyYW1zOiBvdGhlclBhcmFtcyxcbiAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH1dXSxcbiAgICAgICAgZGVwdGhJbmRleDogcGF0aC5sZW5ndGgsXG4gICAgICAgIGxldmVsSW5kZXhcbiAgICAgIH1dO1xuICAgIH1cbiAgICBpZiAoXG4gICAgLy8gaWYgdGhlIHJlc29sdmUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIHJldHVybnMgdHJ1ZSwgdGhlbiByZXNvbHZlXG4gICAgKChfYSA9IHJlc29sdmVkUGFuZS5jYW5IYW5kbGVJbnRlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHJlc29sdmVkUGFuZSwgaW50ZW50LCBwYXJhbXMsIHtcbiAgICAgIHBhbmU6IHJlc29sdmVkUGFuZSxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXhcbiAgICB9KSkgfHxcbiAgICAvLyBpZiB0aGUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIGRpZCBub3QgcmV0dXJuIHRydWUsIHRoZW4gbWF0Y2ggYWdhaW5zdFxuICAgIC8vIHRoaXMgZGVmYXVsdCBjYXNlLiB3ZSB3aWxsIHJlc29sdmUgdGhlIGludGVudCBpZjpcbiAgICByZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudExpc3RcIiAmJlxuICAgIC8vIDEuIHRoZSBzY2hlbWEgdHlwZSBtYXRjaGVzICh0aGlzIHJlcXVpcmVkIGZvciB0aGUgZG9jdW1lbnQgdG8gcmVuZGVyKVxuICAgIHJlc29sdmVkUGFuZS5zY2hlbWFUeXBlTmFtZSA9PT0gc2NoZW1hVHlwZU5hbWUgJiZcbiAgICAvLyAyLiB0aGUgZmlsdGVyIGlzIHRoZSBkZWZhdWx0IGZpbHRlci5cbiAgICAvL1xuICAgIC8vIE5PVEU6IHRoaXMgY2FzZSBpcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlIG1hdGNoZXMgd2hlcmUgdGhlIHVzZXJcbiAgICAvLyBoYXMgY29uZmlndXJlZCBhIG1vcmUgc3BlY2lmaWMgZmlsdGVyIGZvciBhIHBhcnRpY3VsYXIgdHlwZS4gSW4gdGhhdFxuICAgIC8vIGNhc2UsIHRoZSB1c2VyIGNhbiBpbXBsZW1lbnQgdGhlaXIgb3duIGBjYW5IYW5kbGVJbnRlbnRgIGZ1bmN0aW9uXG4gICAgcmVzb2x2ZWRQYW5lLm9wdGlvbnMuZmlsdGVyID09PSBcIl90eXBlID09ICR0eXBlXCIpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBwYW5lczogW1xuICAgICAgICAvLyBtYXAgdGhlIGN1cnJlbnQgcGF0aCB0byByb3V0ZXIgcGFuZXNcbiAgICAgICAgLi4ucGF0aC5tYXAoaWQgPT4gW3tcbiAgICAgICAgICBpZFxuICAgICAgICB9XSksXG4gICAgICAgIC8vIHRoZW4gYXVnbWVudCB3aXRoIHRoZSBpbnRlbnRzIElEcyBhbmQgcGFyYW1zXG4gICAgICAgIFt7XG4gICAgICAgICAgaWQ6IHBhcmFtcy5pZCxcbiAgICAgICAgICBwYXJhbXM6IG90aGVyUGFyYW1zLFxuICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgfV1dLFxuICAgICAgICBkZXB0aEluZGV4OiBwYXRoLmxlbmd0aCxcbiAgICAgICAgbGV2ZWxJbmRleFxuICAgICAgfV07XG4gICAgfVxuICAgIGlmIChyZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJsaXN0XCIgJiYgcmVzb2x2ZWRQYW5lLmNoaWxkICYmIHJlc29sdmVkUGFuZS5pdGVtcykge1xuICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChyZXNvbHZlZFBhbmUuaXRlbXMubWFwKChpdGVtLCBuZXh0TGV2ZWxJbmRleCkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSBcImRpdmlkZXJcIikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybiB0cmF2ZXJzZSh7XG4gICAgICAgICAgY3VycmVudElkOiBpdGVtLl9pZCB8fCBpdGVtLmlkLFxuICAgICAgICAgIGZsYXRJbmRleDogZmxhdEluZGV4ICsgMSxcbiAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgIHBhcmVudDogcmVzb2x2ZWRQYW5lLFxuICAgICAgICAgIHBhdGg6IFsuLi5wYXRoLCBpdGVtLmlkXSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiB0eXBlb2YgcmVzb2x2ZWRQYW5lLmNoaWxkID09PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChyZXNvbHZlZFBhbmUsIFwiY2hpbGRcIikgOiByZXNvbHZlZFBhbmUuY2hpbGQsXG4gICAgICAgICAgbGV2ZWxJbmRleDogbmV4dExldmVsSW5kZXgsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0pKSkuZmxhdCgpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgbWF0Y2hpbmdQYW5lcyA9IGF3YWl0IHRyYXZlcnNlKHtcbiAgICBjdXJyZW50SWQ6IFwicm9vdFwiLFxuICAgIGZsYXRJbmRleDogMCxcbiAgICBsZXZlbEluZGV4OiAwLFxuICAgIGludGVudDogb3B0aW9ucy5pbnRlbnQsXG4gICAgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyxcbiAgICBwYXJlbnQ6IG51bGwsXG4gICAgcGF0aDogW10sXG4gICAgcGF5bG9hZDogb3B0aW9ucy5wYXlsb2FkLFxuICAgIHVucmVzb2x2ZWRQYW5lOiBvcHRpb25zLnJvb3RQYW5lTm9kZSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0OiBvcHRpb25zLnN0cnVjdHVyZUNvbnRleHRcbiAgfSk7XG4gIGNvbnN0IGNsb3Nlc3RQYW5lVG9Sb290ID0gbWF0Y2hpbmdQYW5lcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgaWYgKGEuZGVwdGhJbmRleCA9PT0gYi5kZXB0aEluZGV4KSByZXR1cm4gYS5sZXZlbEluZGV4IC0gYi5sZXZlbEluZGV4O1xuICAgIHJldHVybiBhLmRlcHRoSW5kZXggLSBiLmRlcHRoSW5kZXg7XG4gIH0pWzBdO1xuICBpZiAoY2xvc2VzdFBhbmVUb1Jvb3QpIHtcbiAgICByZXR1cm4gY2xvc2VzdFBhbmVUb1Jvb3QucGFuZXM7XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrRWRpdG9yUGFuZXM7XG59XG5jb25zdCBmYWxsYmFja0VkaXRvckNoaWxkID0gKG5vZGVJZCwgY29udGV4dCkgPT4ge1xuICBjb25zdCBpZCA9IG5vZGVJZC5yZXBsYWNlKC9eX19lZGl0X18vLCBcIlwiKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IHtcbiAgICAgIHJlc29sdmVEb2N1bWVudE5vZGVcbiAgICB9XG4gIH0gPSBjb250ZXh0O1xuICBjb25zdCB7XG4gICAgdHlwZSxcbiAgICB0ZW1wbGF0ZVxuICB9ID0gcGFyYW1zO1xuICBpZiAoIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCB0eXBlIGZvciBkb2N1bWVudCB3aXRoIElEIFwiLmNvbmNhdChpZCwgXCIgd2FzIG5vdCBwcm92aWRlZCBpbiB0aGUgcm91dGVyIHBhcmFtcy5cIikpO1xuICB9XG4gIGxldCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gcmVzb2x2ZURvY3VtZW50Tm9kZSh7XG4gICAgc2NoZW1hVHlwZTogdHlwZSxcbiAgICBkb2N1bWVudElkOiBpZFxuICB9KS5pZChcImVkaXRvclwiKTtcbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgZGVmYXVsdERvY3VtZW50QnVpbGRlciA9IGRlZmF1bHREb2N1bWVudEJ1aWxkZXIuaW5pdGlhbFZhbHVlVGVtcGxhdGUodGVtcGxhdGUsIHBheWxvYWQpO1xuICB9XG4gIHJldHVybiBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyLnNlcmlhbGl6ZSgpO1xufTtcbmZ1bmN0aW9uIGhhc2hDb250ZXh0KGNvbnRleHQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgcmV0dXJuIFwiY29udGV4dEhhc2goXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHtcbiAgICBpZDogY29udGV4dC5pZCxcbiAgICBwYXJlbnRJZDogcGFyZW50ICYmIGFzc2lnbklkKHBhcmVudCksXG4gICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgIGluZGV4OiBjb250ZXh0LmluZGV4LFxuICAgIHNwbGl0SW5kZXg6IGNvbnRleHQuc3BsaXRJbmRleCxcbiAgICBzZXJpYWxpemVPcHRpb25zSW5kZXg6IChfYSA9IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmluZGV4LFxuICAgIHNlcmlhbGl6ZU9wdGlvbnNQYXRoOiAoX2IgPSBjb250ZXh0LnNlcmlhbGl6ZU9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYXRoXG4gIH0pLCBcIilcIik7XG59XG5jb25zdCBoYXNoUmVzb2x2ZWRQYW5lTWV0YSA9IG1ldGEgPT4ge1xuICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIHR5cGU6IG1ldGEudHlwZSxcbiAgICBpZDogbWV0YS5yb3V0ZXJQYW5lU2libGluZy5pZCxcbiAgICBwYXJhbXM6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcucGFyYW1zIHx8IHt9LFxuICAgIHBheWxvYWQ6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCB8fCBudWxsLFxuICAgIGZsYXRJbmRleDogbWV0YS5mbGF0SW5kZXgsXG4gICAgZ3JvdXBJbmRleDogbWV0YS5ncm91cEluZGV4LFxuICAgIHNpYmxpbmdJbmRleDogbWV0YS5zaWJsaW5nSW5kZXgsXG4gICAgcGF0aDogbWV0YS5wYXRoLFxuICAgIHBhbmVOb2RlOiBtZXRhLnR5cGUgPT09IFwicmVzb2x2ZWRNZXRhXCIgPyBhc3NpZ25JZChtZXRhLnBhbmVOb2RlKSA6IG51bGxcbiAgfTtcbiAgcmV0dXJuIFwibWV0YUhhc2goXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG5vcm1hbGl6ZWQpLCBcIilcIik7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVBhbmVUcmVlKF9yZWY0KSB7XG4gIGxldCB7XG4gICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgcGFyZW50OiBwYXJlbnQyLFxuICAgIHBhdGgsXG4gICAgcmVzb2x2ZVBhbmUsXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9ID0gX3JlZjQ7XG4gIGNvbnN0IFtjdXJyZW50LCAuLi5yZXN0XSA9IGZsYXR0ZW5lZFJvdXRlclBhbmVzO1xuICBjb25zdCBuZXh0ID0gcmVzdFswXTtcbiAgY29uc3QgY29udGV4dCA9IHtcbiAgICBpZDogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5pZCxcbiAgICBzcGxpdEluZGV4OiBjdXJyZW50LnNpYmxpbmdJbmRleCxcbiAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgcGF0aDogWy4uLnBhdGgsIGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcuaWRdLFxuICAgIGluZGV4OiBjdXJyZW50LmZsYXRJbmRleCxcbiAgICBwYXJhbXM6IGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcucGFyYW1zIHx8IHt9LFxuICAgIHBheWxvYWQ6IGN1cnJlbnQucm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH07XG4gIHRyeSB7XG4gICAgcmV0dXJuIHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBjdXJyZW50LmZsYXRJbmRleCkucGlwZShcbiAgICAvLyB0aGlzIHN3aXRjaCBtYXAgcmVjZWl2ZXMgYSByZXNvbHZlZCBwYW5lXG4gICAgc3dpdGNoTWFwKHBhbmVOb2RlID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdmVkUGFuZU1ldGEgPSB7XG4gICAgICAgIHR5cGU6IFwicmVzb2x2ZWRNZXRhXCIsXG4gICAgICAgIC4uLmN1cnJlbnQsXG4gICAgICAgIHBhbmVOb2RlLFxuICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGhcbiAgICAgIH07XG4gICAgICBjb25zdCBsb2FkaW5nUGFuZXMgPSByZXN0Lm1hcCgoaSwgcmVzdEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvYWRpbmdQYW5lUGF0aCA9IFsuLi5jb250ZXh0LnBhdGgsIC4uLnJlc3Quc2xpY2UocmVzdEluZGV4KS5tYXAoKF8sIGN1cnJlbnRJbmRleCkgPT4gXCJbXCIuY29uY2F0KGkuZmxhdEluZGV4ICsgY3VycmVudEluZGV4LCBcIl1cIikpXTtcbiAgICAgICAgY29uc3QgbG9hZGluZ1BhbmUgPSB7XG4gICAgICAgICAgdHlwZTogXCJsb2FkaW5nXCIsXG4gICAgICAgICAgcGF0aDogbG9hZGluZ1BhbmVQYXRoLFxuICAgICAgICAgIHBhbmVOb2RlOiBudWxsLFxuICAgICAgICAgIC4uLmlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGxvYWRpbmdQYW5lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBvZihbcmVzb2x2ZWRQYW5lTWV0YV0pO1xuICAgICAgfVxuICAgICAgbGV0IG5leHRTdHJlYW07XG4gICAgICBpZiAoXG4gICAgICAvLyB0aGUgZmFsbGJhY2sgZWRpdG9yIGNhc2VcbiAgICAgIG5leHQgPT0gbnVsbCA/IHZvaWQgMCA6IG5leHQucm91dGVyUGFuZVNpYmxpbmcuaWQuc3RhcnRzV2l0aChcIl9fZWRpdF9fXCIpKSB7XG4gICAgICAgIG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiBmYWxsYmFja0VkaXRvckNoaWxkLFxuICAgICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzOiByZXN0LFxuICAgICAgICAgIHBhcmVudDogcGFyZW50MixcbiAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGgsXG4gICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5ncm91cEluZGV4ID09PSAobmV4dCA9PSBudWxsID8gdm9pZCAwIDogbmV4dC5ncm91cEluZGV4KSkge1xuICAgICAgICBuZXh0U3RyZWFtID0gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgICAgICB1bnJlc29sdmVkUGFuZSxcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFN0cmVhbSA9IHJlc29sdmVQYW5lVHJlZSh7XG4gICAgICAgICAgdW5yZXNvbHZlZFBhbmU6IHR5cGVvZiBwYW5lTm9kZS5jaGlsZCA9PT0gXCJmdW5jdGlvblwiID8gbWVtb0JpbmQocGFuZU5vZGUsIFwiY2hpbGRcIikgOiBwYW5lTm9kZS5jaGlsZCxcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICBwYXJlbnQ6IHBhbmVOb2RlLFxuICAgICAgICAgIHBhdGg6IGNvbnRleHQucGF0aCxcbiAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbmNhdChcbiAgICAgIC8vIHdlIGVtaXQgdGhlIGxvYWRpbmcgcGFuZXMgZmlyc3QgaW4gYSBjb25jYXQgKHRoaXMgZW1pdHMgaW1tZWRpYXRlbHkpXG4gICAgICBvZihbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubG9hZGluZ1BhbmVzXSksXG4gICAgICAvLyB0aGVuIHdoZW5ldmVyIHRoZSBuZXh0IHN0cmVhbSBpcyBkb25lLCB0aGUgcmVzdWx0cyB3aWxsIGJlIGNvbWJpbmVkLlxuICAgICAgbmV4dFN0cmVhbS5waXBlKG1hcChuZXh0UmVzb2x2ZWRQYW5lcyA9PiBbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubmV4dFJlc29sdmVkUGFuZXNdKSkpO1xuICAgIH0pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvcikge1xuICAgICAgaWYgKGUuY29udGV4dCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJQYW5lIHJlc29sdXRpb24gZXJyb3IgYXQgaW5kZXggXCIuY29uY2F0KGUuY29udGV4dC5pbmRleCkuY29uY2F0KGUuY29udGV4dC5zcGxpdEluZGV4ID4gMCA/IFwiIGZvciBzcGxpdCBwYW5lIGluZGV4IFwiLmNvbmNhdChlLmNvbnRleHQuc3BsaXRJbmRleCkgOiBcIlwiLCBcIjogXCIpLmNvbmNhdChlLm1lc3NhZ2UpLmNvbmNhdChlLmhlbHBJZCA/IFwiIC0gc2VlIFwiLmNvbmNhdChnZW5lcmF0ZUhlbHBVcmwoZS5oZWxwSWQpKSA6IFwiXCIpLCBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLmhlbHBJZCA9PT0gXCJzdHJ1Y3R1cmUtaXRlbS1yZXR1cm5lZC1uby1jaGlsZFwiKSB7XG4gICAgICAgIHJldHVybiBvZihbXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlc29sdmVkUGFuZU5vZGVTdHJlYW0oX3JlZjUpIHtcbiAgbGV0IHtcbiAgICByb3V0ZXJQYW5lc1N0cmVhbSxcbiAgICByb290UGFuZU5vZGUsXG4gICAgaW5pdGlhbENhY2hlU3RhdGUgPSB7XG4gICAgICBjYWNoZUtleXNCeUZsYXRJbmRleDogW10sXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogW10sXG4gICAgICByZXNvbHZlZFBhbmVDYWNoZTogLyogQF9fUFVSRV9fICovbmV3IE1hcCgpLFxuICAgICAgcmVzb2x2ZVBhbmU6ICgpID0+IE5FVkVSXG4gICAgfSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH0gPSBfcmVmNTtcbiAgY29uc3QgcmVzb2x2ZWRQYW5lcyQgPSByb3V0ZXJQYW5lc1N0cmVhbS5waXBlKFxuICAvLyBhZGQgaW4gaW1wbGljaXQgXCJyb290XCIgcm91dGVyIHBhbmVcbiAgbWFwKHJhd1JvdXRlclBhbmVzID0+IFtbe1xuICAgIGlkOiBcInJvb3RcIlxuICB9XSwgLi4ucmF3Um91dGVyUGFuZXNdKSxcbiAgLy8gY3JlYXRlIGZsYXR0ZW5lZCByb3V0ZXIgcGFuZXNcbiAgbWFwKHJvdXRlclBhbmVzID0+IHtcbiAgICBjb25zdCBmbGF0dGVuZWRSb3V0ZXJQYW5lcyA9IHJvdXRlclBhbmVzLmZsYXRNYXAoKHJvdXRlclBhbmVHcm91cCwgZ3JvdXBJbmRleCkgPT4gcm91dGVyUGFuZUdyb3VwLm1hcCgocm91dGVyUGFuZVNpYmxpbmcsIHNpYmxpbmdJbmRleCkgPT4gKHtcbiAgICAgIHJvdXRlclBhbmVTaWJsaW5nLFxuICAgICAgZ3JvdXBJbmRleCxcbiAgICAgIHNpYmxpbmdJbmRleFxuICAgIH0pKSkubWFwKChpLCBpbmRleCkgPT4gKHtcbiAgICAgIC4uLmksXG4gICAgICBmbGF0SW5kZXg6IGluZGV4XG4gICAgfSkpO1xuICAgIHJldHVybiBmbGF0dGVuZWRSb3V0ZXJQYW5lcztcbiAgfSksXG4gIC8vIGNhbGN1bGF0ZSBhIFwiZGlmZkluZGV4XCIgdXNlZCBmb3IgY2xlYXJpbmcgdGhlIG1lbW8gY2FjaGVcbiAgc3RhcnRXaXRoKFtdKSwgcGFpcndpc2UoKSwgbWFwKF9yZWY2ID0+IHtcbiAgICBsZXQgW3ByZXYsIGN1cnJdID0gX3JlZjY7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmV2VmFsdWUgPSBwcmV2W2ldO1xuICAgICAgY29uc3QgY3VyclZhbHVlID0gY3VycltpXTtcbiAgICAgIGlmICghaXNFcXVhbChwcmV2VmFsdWUsIGN1cnJWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogY3VycixcbiAgICAgICAgICBkaWZmSW5kZXg6IGlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzOiBjdXJyLFxuICAgICAgZGlmZkluZGV4OiBjdXJyLmxlbmd0aFxuICAgIH07XG4gIH0pLFxuICAvLyBjcmVhdGUgdGhlIG1lbW9pemVkIGByZXNvbHZlUGFuZWAgZnVuY3Rpb24gYW5kIG1hbmFnZSB0aGUgbWVtbyBjYWNoZVxuICBzY2FuKChhY2MsIG5leHQpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBjYWNoZUtleXNCeUZsYXRJbmRleCxcbiAgICAgIHJlc29sdmVkUGFuZUNhY2hlXG4gICAgfSA9IGFjYztcbiAgICBjb25zdCB7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIGRpZmZJbmRleFxuICAgIH0gPSBuZXh0O1xuICAgIGNvbnN0IGJlZm9yZURpZmZJbmRleCA9IGNhY2hlS2V5c0J5RmxhdEluZGV4LnNsaWNlKDAsIGRpZmZJbmRleCArIDEpO1xuICAgIGNvbnN0IGFmdGVyRGlmZkluZGV4ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXguc2xpY2UoZGlmZkluZGV4ICsgMSk7XG4gICAgY29uc3Qga2V5c1RvS2VlcCA9IG5ldyBTZXQoYmVmb3JlRGlmZkluZGV4LmZsYXRNYXAoa2V5U2V0ID0+IEFycmF5LmZyb20oa2V5U2V0KSkpO1xuICAgIGNvbnN0IGtleXNUb0RlbGV0ZSA9IGFmdGVyRGlmZkluZGV4LmZsYXRNYXAoa2V5U2V0ID0+IEFycmF5LmZyb20oa2V5U2V0KSkuZmlsdGVyKGtleSA9PiAha2V5c1RvS2VlcC5oYXMoa2V5KSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvRGVsZXRlKSB7XG4gICAgICByZXNvbHZlZFBhbmVDYWNoZS5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgY29uc3QgbWVtb2l6ZSA9IG5leHRGbiA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdW5yZXNvbHZlZFBhbmUgJiYgXCJcIi5jb25jYXQoYXNzaWduSWQodW5yZXNvbHZlZFBhbmUpLCBcIi1cIikuY29uY2F0KGhhc2hDb250ZXh0KGNvbnRleHQpKTtcbiAgICAgIGNvbnN0IGNhY2hlZFJlc29sdmVkUGFuZSA9IGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmIChjYWNoZWRSZXNvbHZlZFBhbmUpIHJldHVybiBjYWNoZWRSZXNvbHZlZFBhbmU7XG4gICAgICBjb25zdCByZXN1bHQgPSBuZXh0Rm4odW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgICBpZiAoIWtleSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGNvbnN0IGNhY2hlS2V5U2V0ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSB8fCAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgICBjYWNoZUtleVNldC5hZGQoa2V5KTtcbiAgICAgIGNhY2hlS2V5c0J5RmxhdEluZGV4W2ZsYXRJbmRleF0gPSBjYWNoZUtleVNldDtcbiAgICAgIHJlc29sdmVkUGFuZUNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXgsXG4gICAgICByZXNvbHZlZFBhbmVDYWNoZSxcbiAgICAgIHJlc29sdmVQYW5lOiBjcmVhdGVQYW5lUmVzb2x2ZXIobWVtb2l6ZSlcbiAgICB9O1xuICB9LCBpbml0aWFsQ2FjaGVTdGF0ZSksXG4gIC8vIHJ1biB0aGUgbWVtb2l6ZWQsIHJlY3Vyc2l2ZSByZXNvbHZpbmdcbiAgc3dpdGNoTWFwKF9yZWY3ID0+IHtcbiAgICBsZXQge1xuICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gICAgICByZXNvbHZlUGFuZVxuICAgIH0gPSBfcmVmNztcbiAgICByZXR1cm4gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgIHVucmVzb2x2ZWRQYW5lOiByb290UGFuZU5vZGUsXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgIHBhdGg6IFtdLFxuICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSk7XG4gIH0pKTtcbiAgcmV0dXJuIHJlc29sdmVkUGFuZXMkLnBpcGUoXG4gIC8vIHRoaXMgZGlmZnMgdGhlIHByZXZpb3VzIGVtaXNzaW9uIHdpdGggdGhlIGN1cnJlbnQgb25lLiBpZiB0aGVyZSBpcyBhIG5ld1xuICAvLyBsb2FkaW5nIHBhbmUgYXQgdGhlIHNhbWUgcG9zaXRpb24gd2hlcmUgYSBwcmV2aW91cyBwYW5lIGFscmVhZHkgaGFkIGFcbiAgLy8gcmVzb2x2ZWQgdmFsdWUgKGxvb2tpbmcgYXQgdGhlIElEcyB0byBjb21wYXJlKSwgdGhlbiByZXR1cm4gdGhlIHByZXZpb3VzXG4gIC8vIHBhbmUgaW5zdGVhZCBvZiB0aGUgbG9hZGluZyBwYW5lXG4gIHNjYW4oKHByZXYsIG5leHQpID0+IG5leHQubWFwKChuZXh0UGFuZSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBwcmV2UGFuZSA9IHByZXZbaW5kZXhdO1xuICAgIGlmICghcHJldlBhbmUpIHJldHVybiBuZXh0UGFuZTtcbiAgICBpZiAobmV4dFBhbmUudHlwZSAhPT0gXCJsb2FkaW5nXCIpIHJldHVybiBuZXh0UGFuZTtcbiAgICBpZiAocHJldlBhbmUucm91dGVyUGFuZVNpYmxpbmcuaWQgPT09IG5leHRQYW5lLnJvdXRlclBhbmVTaWJsaW5nLmlkKSB7XG4gICAgICByZXR1cm4gcHJldlBhbmU7XG4gICAgfVxuICAgIHJldHVybiBuZXh0UGFuZTtcbiAgfSksIFtdKSxcbiAgLy8gdGhpcyBwcmV2ZW50cyBkdXBsaWNhdGUgZW1pc3Npb25zXG4gIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChwcmV2LCBuZXh0KSA9PiB7XG4gICAgaWYgKHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcHJldlZhbHVlID0gcHJldltpXTtcbiAgICAgIGNvbnN0IG5leHRWYWx1ZSA9IG5leHRbaV07XG4gICAgICBpZiAoaGFzaFJlc29sdmVkUGFuZU1ldGEocHJldlZhbHVlKSAhPT0gaGFzaFJlc29sdmVkUGFuZU1ldGEobmV4dFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9KSk7XG59XG5mdW5jdGlvbiB1c2VSb3V0ZXJQYW5lc1N0cmVhbSgpIHtcbiAgY29uc3Qgcm91dGVyU3RhdGVTdWJqZWN0ID0gdXNlTWVtbygoKSA9PiBuZXcgUmVwbGF5U3ViamVjdCgxKSwgW10pO1xuICBjb25zdCByb3V0ZXJQYW5lcyQgPSB1c2VNZW1vKCgpID0+IHJvdXRlclN0YXRlU3ViamVjdC5hc09ic2VydmFibGUoKS5waXBlKG1hcChfcm91dGVyU3RhdGUgPT4gKF9yb3V0ZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogX3JvdXRlclN0YXRlLnBhbmVzKSB8fCBbXSkpLCBbcm91dGVyU3RhdGVTdWJqZWN0XSk7XG4gIGNvbnN0IHtcbiAgICBzdGF0ZTogcm91dGVyU3RhdGVcbiAgfSA9IHVzZVJvdXRlcigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvdXRlclN0YXRlU3ViamVjdC5uZXh0KHJvdXRlclN0YXRlKTtcbiAgfSwgW3JvdXRlclN0YXRlLCByb3V0ZXJTdGF0ZVN1YmplY3RdKTtcbiAgcmV0dXJuIHJvdXRlclBhbmVzJDtcbn1cbmZ1bmN0aW9uIHVzZVJlc29sdmVkUGFuZXMoKSB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgY29uc3Qge1xuICAgIHN0cnVjdHVyZUNvbnRleHQsXG4gICAgcm9vdFBhbmVOb2RlXG4gIH0gPSB1c2VTdHJ1Y3R1cmVUb29sKCk7XG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKHtcbiAgICBwYW5lRGF0YUl0ZW1zOiBbXSxcbiAgICByZXNvbHZlZFBhbmVzOiBbXSxcbiAgICByb3V0ZXJQYW5lczogW11cbiAgfSk7XG4gIGNvbnN0IHJvdXRlclBhbmVzU3RyZWFtID0gdXNlUm91dGVyUGFuZXNTdHJlYW0oKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCByZXNvbHZlZFBhbmVzJCA9IGNyZWF0ZVJlc29sdmVkUGFuZU5vZGVTdHJlYW0oe1xuICAgICAgcm9vdFBhbmVOb2RlLFxuICAgICAgcm91dGVyUGFuZXNTdHJlYW0sXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSkucGlwZShtYXAocmVzb2x2ZWRQYW5lcyA9PiB7XG4gICAgICBjb25zdCByb3V0ZXJQYW5lcyA9IHJlc29sdmVkUGFuZXMucmVkdWNlKChhY2MsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEdyb3VwID0gYWNjW25leHQuZ3JvdXBJbmRleF0gfHwgW107XG4gICAgICAgIGN1cnJlbnRHcm91cFtuZXh0LnNpYmxpbmdJbmRleF0gPSBuZXh0LnJvdXRlclBhbmVTaWJsaW5nO1xuICAgICAgICBhY2NbbmV4dC5ncm91cEluZGV4XSA9IGN1cnJlbnRHcm91cDtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIFtdKTtcbiAgICAgIGNvbnN0IGdyb3Vwc0xlbiA9IHJvdXRlclBhbmVzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHBhbmVEYXRhSXRlbXMgPSByZXNvbHZlZFBhbmVzLm1hcChwYW5lID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZ3JvdXBJbmRleCxcbiAgICAgICAgICBmbGF0SW5kZXgsXG4gICAgICAgICAgc2libGluZ0luZGV4LFxuICAgICAgICAgIHJvdXRlclBhbmVTaWJsaW5nLFxuICAgICAgICAgIHBhdGhcbiAgICAgICAgfSA9IHBhbmU7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHJvdXRlclBhbmVTaWJsaW5nLmlkO1xuICAgICAgICBjb25zdCBuZXh0R3JvdXAgPSByb3V0ZXJQYW5lc1tncm91cEluZGV4ICsgMV07XG4gICAgICAgIGNvbnN0IHBhbmVEYXRhSXRlbSA9IHtcbiAgICAgICAgICBhY3RpdmU6IGdyb3VwSW5kZXggPT09IGdyb3Vwc0xlbiAtIDIsXG4gICAgICAgICAgY2hpbGRJdGVtSWQ6IChfYSA9IG5leHRHcm91cCA9PSBudWxsID8gdm9pZCAwIDogbmV4dEdyb3VwWzBdLmlkKSAhPSBudWxsID8gX2EgOiBudWxsLFxuICAgICAgICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgICAgICAgaXRlbUlkOiByb3V0ZXJQYW5lU2libGluZy5pZCxcbiAgICAgICAgICBncm91cEluZGV4LFxuICAgICAgICAgIGtleTogXCJcIi5jb25jYXQocGFuZS50eXBlID09PSBcImxvYWRpbmdcIiA/IFwidW5rbm93blwiIDogcGFuZS5wYW5lTm9kZS5pZCwgXCItXCIpLmNvbmNhdChpdGVtSWQsIFwiLVwiKS5jb25jYXQoc2libGluZ0luZGV4KSxcbiAgICAgICAgICBwYW5lOiBwYW5lLnR5cGUgPT09IFwibG9hZGluZ1wiID8gTE9BRElOR19QQU5FIDogcGFuZS5wYW5lTm9kZSxcbiAgICAgICAgICBwYXJhbXM6IHJvdXRlclBhbmVTaWJsaW5nLnBhcmFtcyB8fCB7fSxcbiAgICAgICAgICBwYXRoOiBwYXRoLmpvaW4oXCI7XCIpLFxuICAgICAgICAgIHBheWxvYWQ6IHJvdXRlclBhbmVTaWJsaW5nLnBheWxvYWQsXG4gICAgICAgICAgc2VsZWN0ZWQ6IGZsYXRJbmRleCA9PT0gcmVzb2x2ZWRQYW5lcy5sZW5ndGggLSAxLFxuICAgICAgICAgIHNpYmxpbmdJbmRleFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcGFuZURhdGFJdGVtO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYW5lRGF0YUl0ZW1zLFxuICAgICAgICByb3V0ZXJQYW5lcyxcbiAgICAgICAgcmVzb2x2ZWRQYW5lczogcGFuZURhdGFJdGVtcy5tYXAocGFuZSA9PiBwYW5lLnBhbmUpXG4gICAgICB9O1xuICAgIH0pKTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSByZXNvbHZlZFBhbmVzJC5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogcmVzdWx0ID0+IHNldERhdGEocmVzdWx0KSxcbiAgICAgIGVycm9yOiBlID0+IHNldEVycm9yKGUpXG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbcm9vdFBhbmVOb2RlLCByb3V0ZXJQYW5lc1N0cmVhbSwgc3RydWN0dXJlQ29udGV4dF0pO1xuICByZXR1cm4gZGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURvY3VtZW50SWRBbmRUeXBlKGRvY3VtZW50U3RvcmUsIGlkLCB0eXBlKSB7XG4gIGlmIChpZCAmJiB0eXBlKSByZXR1cm4ge1xuICAgIGlkLFxuICAgIHR5cGVcbiAgfTtcbiAgaWYgKCFpZCAmJiB0eXBlKSByZXR1cm4ge1xuICAgIGlkOiB1dWlkKCksXG4gICAgdHlwZVxuICB9O1xuICBpZiAoaWQgJiYgIXR5cGUpIHtcbiAgICBjb25zdCByZXNvbHZlZFR5cGUgPSBhd2FpdCBmaXJzdFZhbHVlRnJvbShkb2N1bWVudFN0b3JlLnJlc29sdmVUeXBlRm9yRG9jdW1lbnQoaWQpKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICB0eXBlOiByZXNvbHZlZFR5cGVcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBQYW5lUmVzb2x1dGlvbkVycm9yKHtcbiAgICBtZXNzYWdlOiBcIk5laXRoZXIgZG9jdW1lbnQgYGlkYCBvciBgdHlwZWAgd2FzIHByb3ZpZGVkIHdoZW4gdHJ5aW5nIHRvIHJlc29sdmUgaW50ZW50LlwiXG4gIH0pO1xufVxuY29uc3QgRU1QVFlfUkVDT1JEID0ge307XG5jb25zdCBJbnRlbnRSZXNvbHZlciA9IG1lbW8oZnVuY3Rpb24gSW50ZW50UmVzb2x2ZXIyKCkge1xuICBjb25zdCB7XG4gICAgbmF2aWdhdGVcbiAgfSA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBtYXliZUludGVudCA9IHVzZVJvdXRlclN0YXRlKHVzZUNhbGxiYWNrKHJvdXRlclN0YXRlID0+IHtcbiAgICBjb25zdCBpbnRlbnROYW1lID0gdHlwZW9mIHJvdXRlclN0YXRlLmludGVudCA9PT0gXCJzdHJpbmdcIiA/IHJvdXRlclN0YXRlLmludGVudCA6IHZvaWQgMDtcbiAgICByZXR1cm4gaW50ZW50TmFtZSA/IHtcbiAgICAgIGludGVudDogaW50ZW50TmFtZSxcbiAgICAgIHBhcmFtczogaXNSZWNvcmQocm91dGVyU3RhdGUucGFyYW1zKSA/IHJvdXRlclN0YXRlLnBhcmFtcyA6IEVNUFRZX1JFQ09SRCxcbiAgICAgIHBheWxvYWQ6IHJvdXRlclN0YXRlLnBheWxvYWRcbiAgICB9IDogdm9pZCAwO1xuICB9LCBbXSkpO1xuICBjb25zdCB7XG4gICAgcm9vdFBhbmVOb2RlLFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfSA9IHVzZVN0cnVjdHVyZVRvb2woKTtcbiAgY29uc3QgZG9jdW1lbnRTdG9yZSA9IHVzZURvY3VtZW50U3RvcmUoKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWF5YmVJbnRlbnQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaW50ZW50LFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHBheWxvYWRcbiAgICAgIH0gPSBtYXliZUludGVudDtcbiAgICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIGFzeW5jIGZ1bmN0aW9uIGVmZmVjdCgpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSA9IGF3YWl0IGVuc3VyZURvY3VtZW50SWRBbmRUeXBlKGRvY3VtZW50U3RvcmUsIHR5cGVvZiBwYXJhbXMuaWQgPT09IFwic3RyaW5nXCIgPyBwYXJhbXMuaWQgOiB2b2lkIDAsIHR5cGVvZiBwYXJhbXMudHlwZSA9PT0gXCJzdHJpbmdcIiA/IHBhcmFtcy50eXBlIDogdm9pZCAwKTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYW5lcyA9IGF3YWl0IHJlc29sdmVJbnRlbnQoe1xuICAgICAgICAgIGludGVudCxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdHlwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICByb290UGFuZU5vZGUsXG4gICAgICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkgcmV0dXJuO1xuICAgICAgICBuYXZpZ2F0ZSh7XG4gICAgICAgICAgcGFuZXNcbiAgICAgICAgfSwge1xuICAgICAgICAgIHJlcGxhY2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlZmZlY3QoKS5jYXRjaChzZXRFcnJvcik7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtkb2N1bWVudFN0b3JlLCBtYXliZUludGVudCwgbmF2aWdhdGUsIHJvb3RQYW5lTm9kZSwgc3RydWN0dXJlQ29udGV4dF0pO1xuICByZXR1cm4gbnVsbDtcbn0pO1xudmFyIF9fZnJlZXplJDEgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkMSA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkMShfX2RlZlByb3AkMShjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDEocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDE7XG5jb25zdCBQYXRoU2VnbWVudCA9IHN0eWxlZC5zcGFuKF9hJDEgfHwgKF9hJDEgPSBfX3RlbXBsYXRlJDEoW1wiXFxuICAmOm5vdCg6bGFzdC1jaGlsZCk6OmFmdGVyIHtcXG4gICAgY29udGVudDogJyBcXHUyNzlEICc7XFxuICAgIG9wYWNpdHk6IDAuNTtcXG4gIH1cXG5cIl0pKSk7XG5mdW5jdGlvbiBmb3JtYXRTdGFjayhzdGFjaykge1xuICByZXR1cm4gc3RhY2sucmVwbGFjZSgvXFwoXFwuXFwuXFwuXFwpXFwuL2csIFwiKC4uLilcXG4gIC5cIikucmVwbGFjZSgvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV9cXGQrXysvZywgXCJcIikucmVwbGFjZSgvX19fZGVmYXVsdFxcLi9nLCBcIi5cIikucmVwbGFjZShuZXcgUmVnRXhwKFwiIFxcXFwoaHR0cHM/OlxcXFwvXFxcXC9cIi5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3QpLCBcImdcIiksIFwiIChcIik7XG59XG5mdW5jdGlvbiBTdHJ1Y3R1cmVFcnJvcihfcmVmOCkge1xuICBsZXQge1xuICAgIGVycm9yXG4gIH0gPSBfcmVmODtcbiAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBQYW5lUmVzb2x1dGlvbkVycm9yKSkge1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHtcbiAgICBjYXVzZVxuICB9ID0gZXJyb3I7XG4gIGNvbnN0IHtcbiAgICB0XG4gIH0gPSB1c2VUcmFuc2xhdGlvbihzdHJ1Y3R1cmVMb2NhbGVOYW1lc3BhY2UpO1xuICBjb25zdCBzdGFjayA9IChjYXVzZSA9PSBudWxsID8gdm9pZCAwIDogY2F1c2Uuc3RhY2spIHx8IGVycm9yLnN0YWNrO1xuICBjb25zdCBzaG93U3RhY2sgPSBzdGFjayAmJiAhKGNhdXNlIGluc3RhbmNlb2YgU2VyaWFsaXplRXJyb3IpICYmICFlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiTW9kdWxlIGJ1aWxkIGZhaWxlZDpcIik7XG4gIGNvbnN0IHBhdGggPSBjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yID8gY2F1c2UucGF0aCA6IFtdO1xuICBjb25zdCBoZWxwSWQgPSBjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yICYmIGNhdXNlLmhlbHBJZCB8fCBlcnJvci5oZWxwSWQ7XG4gIGNvbnN0IGhhbmRsZVJlbG9hZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDYXJkLCB7XG4gICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgcGFkZGluZzogNCxcbiAgICBzaXppbmc6IFwiYm9yZGVyXCIsXG4gICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKENvbnRhaW5lciwge1xuICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goSGVhZGluZywge1xuICAgICAgICBhczogXCJoMlwiLFxuICAgICAgICBjaGlsZHJlbjogdChcInN0cnVjdHVyZS1lcnJvci5oZWFkZXIudGV4dFwiKVxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeHMoQ2FyZCwge1xuICAgICAgICBtYXJnaW5Ub3A6IDQsXG4gICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgIHJhZGl1czogMixcbiAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICBzaGFkb3c6IDEsXG4gICAgICAgIHRvbmU6IFwiaW5oZXJpdFwiLFxuICAgICAgICBjaGlsZHJlbjogW3BhdGgubGVuZ3RoID4gMCAmJiAvKiBAX19QVVJFX18gKi9qc3hzKFN0YWNrLCB7XG4gICAgICAgICAgc3BhY2U6IDIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgIHdlaWdodDogXCJtZWRpdW1cIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiB0KFwic3RydWN0dXJlLWVycm9yLnN0cnVjdHVyZS1wYXRoLmxhYmVsXCIpXG4gICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChDb2RlLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogcGF0aC5zbGljZSgxKS5tYXAoKHNlZ21lbnQsIGkpID0+XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tYXJyYXktaW5kZXgta2V5XG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi9cbiAgICAgICAgICAgIGpzeChQYXRoU2VnbWVudCwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogc2VnbWVudFxuICAgICAgICAgICAgfSwgXCJcIi5jb25jYXQoc2VnbWVudCwgXCItXCIpLmNvbmNhdChpKSkpXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3hzKFN0YWNrLCB7XG4gICAgICAgICAgbWFyZ2luVG9wOiA0LFxuICAgICAgICAgIHNwYWNlOiAyLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogdChcInN0cnVjdHVyZS1lcnJvci5lcnJvci5sYWJlbFwiKVxuICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goQ29kZSwge1xuICAgICAgICAgICAgY2hpbGRyZW46IHNob3dTdGFjayA/IGZvcm1hdFN0YWNrKHN0YWNrKSA6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSksIGhlbHBJZCAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgbWFyZ2luVG9wOiA0LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChcImFcIiwge1xuICAgICAgICAgICAgICBocmVmOiBnZW5lcmF0ZUhlbHBVcmwoaGVscElkKSxcbiAgICAgICAgICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogdChcInN0cnVjdHVyZS1lcnJvci5kb2NzLWxpbmsudGV4dFwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIG1hcmdpblRvcDogNCxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgdGV4dDogdChcInN0cnVjdHVyZS1lcnJvci5yZWxvYWQtYnV0dG9uLnRleHRcIiksXG4gICAgICAgICAgICBpY29uOiBTeW5jSWNvbixcbiAgICAgICAgICAgIHRvbmU6IFwicHJpbWFyeVwiLFxuICAgICAgICAgICAgb25DbGljazogaGFuZGxlUmVsb2FkXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIFVua25vd25QYW5lKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpc1NlbGVjdGVkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHR5cGUgPSBpc1JlY29yZChwYW5lKSAmJiBwYW5lLnR5cGUgfHwgbnVsbDtcbiAgY29uc3Qge1xuICAgIHRcbiAgfSA9IHVzZVRyYW5zbGF0aW9uKHN0cnVjdHVyZUxvY2FsZU5hbWVzcGFjZSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3hzKFBhbmUsIHtcbiAgICBpZDogcGFuZUtleSxcbiAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChQYW5lSGVhZGVyLCB7XG4gICAgICB0aXRsZTogdChcInBhbmVzLnVua25vd24tcGFuZS10eXBlLnRpdGxlXCIpXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29udGVudCwge1xuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgY2hpbGRyZW46IHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiID8gLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUcmFuc2xhdGUsIHtcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICBpMThuS2V5OiBcInBhbmVzLnVua25vd24tcGFuZS10eXBlLnVua25vd24tdHlwZS50ZXh0XCIsXG4gICAgICAgICAgICB2YWx1ZXM6IHtcbiAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pIDogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgICBhczogXCJwXCIsXG4gICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUcmFuc2xhdGUsIHtcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICBpMThuS2V5OiBcInBhbmVzLnVua25vd24tcGFuZS10eXBlLm1pc3NpbmctdHlwZS50ZXh0XCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBwYW5lTWFwID0ge1xuICBjb21wb25lbnQ6IGxhenkoKCkgPT4gaW1wb3J0KCcuL2luZGV4LXBJcWxNcG5pLmpzJykpLFxuICBkb2N1bWVudDogbGF6eSgoKSA9PiBpbXBvcnQoJy4vcGFuZS1EZWxVeXYzMi5qcycpKSxcbiAgZG9jdW1lbnRMaXN0OiBsYXp5KCgpID0+IGltcG9ydCgnLi9wYW5lLUNvWXdKeGpqLmpzJykpLFxuICBsaXN0OiBsYXp5KCgpID0+IGltcG9ydCgnLi9pbmRleC1ESDRZSVRfdy5qcycpKVxufTtcbmNvbnN0IFN0cnVjdHVyZVRvb2xQYW5lID0gbWVtbyhmdW5jdGlvbiBTdHJ1Y3R1cmVUb29sUGFuZTIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGFjdGl2ZSxcbiAgICBjaGlsZEl0ZW1JZCxcbiAgICBncm91cEluZGV4LFxuICAgIGluZGV4LFxuICAgIGl0ZW1JZCxcbiAgICBwYW5lLFxuICAgIHBhbmVLZXksXG4gICAgcGFyYW1zLFxuICAgIHBheWxvYWQsXG4gICAgcGF0aCxcbiAgICBzZWxlY3RlZCxcbiAgICBzaWJsaW5nSW5kZXhcbiAgfSA9IHByb3BzO1xuICBjb25zdCBQYW5lQ29tcG9uZW50ID0gcGFuZU1hcFtwYW5lLnR5cGVdIHx8IFVua25vd25QYW5lO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhbmVSb3V0ZXJQcm92aWRlciwge1xuICAgIGZsYXRJbmRleDogaW5kZXgsXG4gICAgaW5kZXg6IGdyb3VwSW5kZXgsXG4gICAgcGFyYW1zLFxuICAgIHBheWxvYWQsXG4gICAgc2libGluZ0luZGV4LFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU3VzcGVuc2UsIHtcbiAgICAgIGZhbGxiYWNrOiAvKiBAX19QVVJFX18gKi9qc3goTG9hZGluZ1BhbmUsIHtcbiAgICAgICAgcGFuZUtleSxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgc2VsZWN0ZWRcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lQ29tcG9uZW50LCB7XG4gICAgICAgIGNoaWxkSXRlbUlkOiBjaGlsZEl0ZW1JZCB8fCBcIlwiLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgaXRlbUlkLFxuICAgICAgICBpc0FjdGl2ZTogYWN0aXZlLFxuICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZCxcbiAgICAgICAgcGFuZUtleSxcbiAgICAgICAgcGFuZVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn0sIChfcmVmOSwgX3JlZjEwKSA9PiB7XG4gIGxldCB7XG4gICAgcGFyYW1zOiBwcmV2UGFyYW1zID0ge30sXG4gICAgcGF5bG9hZDogcHJldlBheWxvYWQgPSBudWxsLFxuICAgIC4uLnByZXZcbiAgfSA9IF9yZWY5O1xuICBsZXQge1xuICAgIHBhcmFtczogbmV4dFBhcmFtcyA9IHt9LFxuICAgIHBheWxvYWQ6IG5leHRQYXlsb2FkID0gbnVsbCxcbiAgICAuLi5uZXh0XG4gIH0gPSBfcmVmMTA7XG4gIGlmICghaXNFcXVhbChwcmV2UGFyYW1zLCBuZXh0UGFyYW1zKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIWlzRXF1YWwocHJldlBheWxvYWQsIG5leHRQYXlsb2FkKSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBrZXlzID0gLyogQF9fUFVSRV9fICovbmV3IFNldChbLi4uT2JqZWN0LmtleXMocHJldiksIC4uLk9iamVjdC5rZXlzKG5leHQpXSk7XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBpZiAocHJldltrZXldICE9PSBuZXh0W2tleV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn0pO1xuZnVuY3Rpb24gTm9Eb2N1bWVudFR5cGVzU2NyZWVuKCkge1xuICBjb25zdCB7XG4gICAgdFxuICB9ID0gdXNlVHJhbnNsYXRpb24oc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDYXJkLCB7XG4gICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgIGp1c3RpZnk6IFwiY2VudGVyXCIsXG4gICAgICBwYWRkaW5nOiA0LFxuICAgICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDb250YWluZXIsIHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ2FyZCwge1xuICAgICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgIHNoYWRvdzogMSxcbiAgICAgICAgICB0b25lOiBcImNhdXRpb25cIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhGbGV4LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qIEBfX1BVUkVfXyAqL2pzeChCb3gsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFdhcm5pbmdPdXRsaW5lSWNvbiwge30pXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAzLFxuICAgICAgICAgICAgICBzcGFjZTogMyxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICAgIGFzOiBcImgxXCIsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IHQoXCJuby1kb2N1bWVudC10eXBlcy1zY3JlZW4udGl0bGVcIilcbiAgICAgICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IHQoXCJuby1kb2N1bWVudC10eXBlcy1zY3JlZW4uc3VidGl0bGVcIilcbiAgICAgICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgYXM6IFwicFwiLFxuICAgICAgICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChcImFcIiwge1xuICAgICAgICAgICAgICAgICAgaHJlZjogXCJodHRwczovL3d3dy5zYW5pdHkuaW8vZG9jcy9jcmVhdGUtYS1zY2hlbWEtYW5kLWNvbmZpZ3VyZS1zYW5pdHktc3R1ZGlvXCIsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgICAgICAgICByZWw6IFwibm9yZWZlcnJlclwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHQoXCJuby1kb2N1bWVudC10eXBlcy1zY3JlZW4ubGluay10ZXh0XCIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IERvY3VtZW50VGl0bGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBkb2N1bWVudElkLFxuICAgIGRvY3VtZW50VHlwZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVkaXRTdGF0ZSA9IHVzZUVkaXRTdGF0ZShkb2N1bWVudElkLCBkb2N1bWVudFR5cGUpO1xuICBjb25zdCBzY2hlbWEgPSB1c2VTY2hlbWEoKTtcbiAgY29uc3Qge1xuICAgIHRcbiAgfSA9IHVzZVRyYW5zbGF0aW9uKHN0cnVjdHVyZUxvY2FsZU5hbWVzcGFjZSk7XG4gIGNvbnN0IGlzTmV3RG9jdW1lbnQgPSAhKGVkaXRTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogZWRpdFN0YXRlLnB1Ymxpc2hlZCkgJiYgIShlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5kcmFmdCk7XG4gIGNvbnN0IGRvY3VtZW50VmFsdWUgPSAoZWRpdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBlZGl0U3RhdGUuZHJhZnQpIHx8IChlZGl0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVkaXRTdGF0ZS5wdWJsaXNoZWQpO1xuICBjb25zdCBzY2hlbWFUeXBlID0gc2NoZW1hLmdldChkb2N1bWVudFR5cGUpO1xuICBjb25zdCB7XG4gICAgdmFsdWUsXG4gICAgaXNMb2FkaW5nOiBwcmV2aWV3VmFsdWVJc0xvYWRpbmdcbiAgfSA9IHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldyh7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0pO1xuICBjb25zdCBkb2N1bWVudFRpdGxlID0gaXNOZXdEb2N1bWVudCA/IHQoXCJicm93c2VyLWRvY3VtZW50LXRpdGxlLm5ldy1kb2N1bWVudFwiLCB7XG4gICAgc2NoZW1hVHlwZTogKHNjaGVtYVR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHNjaGVtYVR5cGUudGl0bGUpIHx8IChzY2hlbWFUeXBlID09IG51bGwgPyB2b2lkIDAgOiBzY2hlbWFUeXBlLm5hbWUpXG4gIH0pIDogKHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS50aXRsZSkgfHwgdChcImJyb3dzZXItZG9jdW1lbnQtdGl0bGUudW50aXRsZWQtZG9jdW1lbnRcIik7XG4gIGNvbnN0IHNldHRsZWQgPSBlZGl0U3RhdGUucmVhZHkgJiYgIXByZXZpZXdWYWx1ZUlzTG9hZGluZztcbiAgY29uc3QgbmV3VGl0bGUgPSB1c2VDb25zdHJ1Y3REb2N1bWVudFRpdGxlKGRvY3VtZW50VGl0bGUpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2V0dGxlZCkgcmV0dXJuO1xuICAgIGRvY3VtZW50LnRpdGxlID0gbmV3VGl0bGU7XG4gIH0sIFtkb2N1bWVudFRpdGxlLCBzZXR0bGVkLCBuZXdUaXRsZV0pO1xuICByZXR1cm4gbnVsbDtcbn07XG5jb25zdCBQYXNzdGhyb3VnaFRpdGxlID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgdGl0bGVcbiAgfSA9IHByb3BzO1xuICBjb25zdCBuZXdUaXRsZSA9IHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUodGl0bGUpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRvY3VtZW50LnRpdGxlID0gbmV3VGl0bGU7XG4gIH0sIFtuZXdUaXRsZSwgdGl0bGVdKTtcbiAgcmV0dXJuIG51bGw7XG59O1xuY29uc3QgU3RydWN0dXJlVGl0bGUgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICByZXNvbHZlZFBhbmVzXG4gIH0gPSBwcm9wcztcbiAgaWYgKCEocmVzb2x2ZWRQYW5lcyA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZWRQYW5lcy5sZW5ndGgpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgbGFzdFBhbmUgPSByZXNvbHZlZFBhbmVzW3Jlc29sdmVkUGFuZXMubGVuZ3RoIC0gMV07XG4gIGlmIChpc0xvYWRpbmdQYW5lKGxhc3RQYW5lKSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUGFzc3Rocm91Z2hUaXRsZSwge30pO1xuICB9XG4gIGlmIChpc0RvY3VtZW50UGFuZShsYXN0UGFuZSkpIHtcbiAgICBpZiAobGFzdFBhbmUgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RQYW5lLnRpdGxlKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhc3N0aHJvdWdoVGl0bGUsIHtcbiAgICAgICAgdGl0bGU6IGxhc3RQYW5lLnRpdGxlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEb2N1bWVudFRpdGxlLCB7XG4gICAgICBkb2N1bWVudElkOiBsYXN0UGFuZS5vcHRpb25zLmlkLFxuICAgICAgZG9jdW1lbnRUeXBlOiBsYXN0UGFuZS5vcHRpb25zLnR5cGVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhc3N0aHJvdWdoVGl0bGUsIHtcbiAgICB0aXRsZTogbGFzdFBhbmUgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RQYW5lLnRpdGxlXG4gIH0pO1xufTtcbmZ1bmN0aW9uIHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUoYWN0aXZlVGl0bGUpIHtcbiAgY29uc3Qgc3RydWN0dXJlVG9vbEJhc2VUaXRsZSA9IHVzZVN0cnVjdHVyZVRvb2woKS5zdHJ1Y3R1cmVDb250ZXh0LnRpdGxlO1xuICByZXR1cm4gW2FjdGl2ZVRpdGxlLCBzdHJ1Y3R1cmVUb29sQmFzZVRpdGxlXS5maWx0ZXIodGl0bGUgPT4gdGl0bGUpLmpvaW4oXCIgfCBcIik7XG59XG5mdW5jdGlvbiBpc0RvY3VtZW50UGFuZShwYW5lKSB7XG4gIHJldHVybiBwYW5lICE9PSBMT0FESU5HX1BBTkUgJiYgcGFuZS50eXBlID09PSBcImRvY3VtZW50XCI7XG59XG5mdW5jdGlvbiBpc0xvYWRpbmdQYW5lKHBhbmUpIHtcbiAgcmV0dXJuIHBhbmUgPT09IExPQURJTkdfUEFORTtcbn1cbnZhciBfX2ZyZWV6ZSA9IE9iamVjdC5mcmVlemU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUgPSAoY29va2VkLCByYXcpID0+IF9fZnJlZXplKF9fZGVmUHJvcChjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplKHJhdyB8fCBjb29rZWQuc2xpY2UoKSlcbn0pKTtcbnZhciBfYTtcbmNvbnN0IFN0eWxlZFBhbmVMYXlvdXQgPSBzdHlsZWQoUGFuZUxheW91dCkoX2EgfHwgKF9hID0gX190ZW1wbGF0ZShbXCJcXG4gIG1pbi1oZWlnaHQ6IDEwMCU7XFxuICBtaW4td2lkdGg6IDMyMHB4O1xcblwiXSkpKTtcbmNvbnN0IGlzU2F2ZUhvdGtleSA9IGlzSG90a2V5KFwibW9kK3NcIik7XG5jb25zdCBTdHJ1Y3R1cmVUb29sID0gbWVtbyhmdW5jdGlvbiBTdHJ1Y3R1cmVUb29sMihfcmVmMTEpIHtcbiAgbGV0IHtcbiAgICBvblBhbmVDaGFuZ2VcbiAgfSA9IF9yZWYxMTtcbiAgdmFyIF9hMjtcbiAgY29uc3Qge1xuICAgIHB1c2g6IHB1c2hUb2FzdFxuICB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3Qgc2NoZW1hID0gdXNlU2NoZW1hKCk7XG4gIGNvbnN0IHtcbiAgICBsYXlvdXRDb2xsYXBzZWQsXG4gICAgc2V0TGF5b3V0Q29sbGFwc2VkXG4gIH0gPSB1c2VTdHJ1Y3R1cmVUb29sKCk7XG4gIGNvbnN0IHtcbiAgICBwYW5lRGF0YUl0ZW1zLFxuICAgIHJlc29sdmVkUGFuZXNcbiAgfSA9IHVzZVJlc29sdmVkUGFuZXMoKTtcbiAgY29uc3QgaXNSZXNvbHZpbmdJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZSh1c2VDYWxsYmFjayhyb3V0ZXJTdGF0ZSA9PiB0eXBlb2Ygcm91dGVyU3RhdGUuaW50ZW50ID09PSBcInN0cmluZ1wiLCBbXSkpO1xuICBjb25zdCB7XG4gICAgc2FuaXR5OiB7XG4gICAgICBtZWRpYVxuICAgIH1cbiAgfSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IFtwb3J0YWxFbGVtZW50LCBzZXRQb3J0YWxFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBoYW5kbGVSb290Q29sbGFwc2UgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRMYXlvdXRDb2xsYXBzZWQodHJ1ZSksIFtzZXRMYXlvdXRDb2xsYXBzZWRdKTtcbiAgY29uc3QgaGFuZGxlUm9vdEV4cGFuZCA9IHVzZUNhbGxiYWNrKCgpID0+IHNldExheW91dENvbGxhcHNlZChmYWxzZSksIFtzZXRMYXlvdXRDb2xsYXBzZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzb2x2ZWRQYW5lcy5sZW5ndGgpIHtcbiAgICAgIG9uUGFuZUNoYW5nZShyZXNvbHZlZFBhbmVzKTtcbiAgICB9XG4gIH0sIFtvblBhbmVDaGFuZ2UsIHJlc29sdmVkUGFuZXNdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVHbG9iYWxLZXlEb3duID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKGlzU2F2ZUhvdGtleShldmVudCkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcHVzaFRvYXN0KHtcbiAgICAgICAgICBjbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICBpZDogXCJhdXRvLXNhdmUtbWVzc2FnZVwiLFxuICAgICAgICAgIHN0YXR1czogXCJpbmZvXCIsXG4gICAgICAgICAgdGl0bGU6IFwiWW91ciB3b3JrIGlzIGF1dG9tYXRpY2FsbHkgc2F2ZWQhXCIsXG4gICAgICAgICAgZHVyYXRpb246IDRlM1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUdsb2JhbEtleURvd24pO1xuICB9LCBbcHVzaFRvYXN0XSk7XG4gIGNvbnN0IGhhc0RlZmluZWREb2N1bWVudFR5cGVzID0gKF9hMiA9IHNjaGVtYS5fb3JpZ2luYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYTIudHlwZXMuc29tZShfaXNDdXN0b21Eb2N1bWVudFR5cGVEZWZpbml0aW9uKTtcbiAgaWYgKCFoYXNEZWZpbmVkRG9jdW1lbnRUeXBlcykge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goTm9Eb2N1bWVudFR5cGVzU2NyZWVuLCB7fSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoUG9ydGFsUHJvdmlkZXIsIHtcbiAgICBlbGVtZW50OiBwb3J0YWxFbGVtZW50IHx8IG51bGwsXG4gICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3hzKFN0eWxlZFBhbmVMYXlvdXQsIHtcbiAgICAgIGZsZXg6IDEsXG4gICAgICBoZWlnaHQ6IGxheW91dENvbGxhcHNlZCA/IHZvaWQgMCA6IFwiZmlsbFwiLFxuICAgICAgbWluV2lkdGg6IG1lZGlhWzFdLFxuICAgICAgb25Db2xsYXBzZTogaGFuZGxlUm9vdENvbGxhcHNlLFxuICAgICAgb25FeHBhbmQ6IGhhbmRsZVJvb3RFeHBhbmQsXG4gICAgICBjaGlsZHJlbjogW3BhbmVEYXRhSXRlbXMubWFwKF9yZWYxMiA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgIGNoaWxkSXRlbUlkLFxuICAgICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgIGtleTogcGFuZUtleSxcbiAgICAgICAgICBwYW5lLFxuICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICBzaWJsaW5nSW5kZXgsXG4gICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgfSA9IF9yZWYxMjtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBwYW5lID09PSBMT0FESU5HX1BBTkUgPyAvKiBAX19QVVJFX18gKi9qc3goTG9hZGluZ1BhbmUsIHtcbiAgICAgICAgICAgIHBhbmVLZXksXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqL2pzeChTdHJ1Y3R1cmVUb29sUGFuZSwge1xuICAgICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgICAgZ3JvdXBJbmRleCxcbiAgICAgICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgICAgICBwYW5lLFxuICAgICAgICAgICAgY2hpbGRJdGVtSWQsXG4gICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICBwYW5lS2V5LFxuICAgICAgICAgICAgcGFyYW1zOiBwYW5lUGFyYW1zLFxuICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgIHNpYmxpbmdJbmRleFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIFwiXCIuY29uY2F0KHBhbmUgPT09IExPQURJTkdfUEFORSA/IFwibG9hZGluZ1wiIDogcGFuZS50eXBlLCBcIi1cIikuY29uY2F0KHBhbmVJbmRleCkpO1xuICAgICAgfSksIHBhbmVEYXRhSXRlbXMubGVuZ3RoIDw9IDEgJiYgaXNSZXNvbHZpbmdJbnRlbnQgJiYgLyogQF9fUFVSRV9fICovanN4KExvYWRpbmdQYW5lLCB7XG4gICAgICAgIHBhbmVLZXk6IFwiaW50ZW50LXJlc29sdmVyXCJcbiAgICAgIH0pXVxuICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goU3RydWN0dXJlVGl0bGUsIHtcbiAgICAgIHJlc29sdmVkUGFuZXNcbiAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KFwiZGl2XCIsIHtcbiAgICAgIFwiZGF0YS1wb3J0YWxcIjogXCJcIixcbiAgICAgIHJlZjogc2V0UG9ydGFsRWxlbWVudFxuICAgIH0pXVxuICB9KTtcbn0pO1xuZnVuY3Rpb24gU3RydWN0dXJlVG9vbEJvdW5kYXJ5KF9yZWYxMykge1xuICBsZXQge1xuICAgIHRvb2w6IHtcbiAgICAgIG9wdGlvbnNcbiAgICB9XG4gIH0gPSBfcmVmMTM7XG4gIGNvbnN0IHtcbiAgICB1bnN0YWJsZV9zb3VyY2VzOiBzb3VyY2VzXG4gIH0gPSB1c2VXb3Jrc3BhY2UoKTtcbiAgY29uc3QgW2ZpcnN0U291cmNlXSA9IHNvdXJjZXM7XG4gIGNvbnN0IHtcbiAgICBzb3VyY2UsXG4gICAgZGVmYXVsdERvY3VtZW50Tm9kZSxcbiAgICBzdHJ1Y3R1cmVcbiAgfSA9IG9wdGlvbnMgfHwge307XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0QWN0aXZlUGFuZXMoW10pO1xuICAgIHJldHVybiAoKSA9PiBzZXRBY3RpdmVQYW5lcyhbXSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgW3tcbiAgICBlcnJvclxuICB9LCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSh7XG4gICAgZXJyb3I6IG51bGxcbiAgfSk7XG4gIGlmIChlcnJvcikgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChTdHJ1Y3R1cmVFcnJvciwge1xuICAgIGVycm9yXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEVycm9yQm91bmRhcnksIHtcbiAgICBvbkNhdGNoOiBzZXRFcnJvcixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFNvdXJjZVByb3ZpZGVyLCB7XG4gICAgICBuYW1lOiBzb3VyY2UgfHwgZmlyc3RTb3VyY2UubmFtZSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3hzKFN0cnVjdHVyZVRvb2xQcm92aWRlciwge1xuICAgICAgICBkZWZhdWx0RG9jdW1lbnROb2RlLFxuICAgICAgICBzdHJ1Y3R1cmUsXG4gICAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFN0cnVjdHVyZVRvb2wsIHtcbiAgICAgICAgICBvblBhbmVDaGFuZ2U6IHNldEFjdGl2ZVBhbmVzXG4gICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi9qc3goSW50ZW50UmVzb2x2ZXIsIHt9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5leHBvcnQgeyBTdHJ1Y3R1cmVUb29sQm91bmRhcnkgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtQm42Z1dqNEEuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/sanity/lib/_chunks/index-Bn6gWj4A.js\n"));

/***/ })

}]);